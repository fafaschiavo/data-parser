(this["webpackJsonpdata-parser"]=this["webpackJsonpdata-parser"]||[]).push([[0],{210:function(e,t,a){e.exports=a(350)},215:function(e,t,a){},216:function(e,t,a){},224:function(e,t,a){},227:function(e,t,a){},228:function(e,t,a){},237:function(e,t,a){},347:function(e,t,a){},348:function(e,t,a){},349:function(e,t,a){},350:function(e,t,a){"use strict";a.r(t);var r={};a.r(r),a.d(r,"set_full_list_urls",(function(){return se})),a.d(r,"set_scraper_settings",(function(){return ne})),a.d(r,"set_crawl_urls",(function(){return le})),a.d(r,"set_crawl_selectors",(function(){return ce})),a.d(r,"set_partial_results",(function(){return oe})),a.d(r,"set_final_results",(function(){return ie}));var s=a(0),n=a.n(s),l=a(9),c=a.n(l),o=(a(215),a(14)),i=a(10),u=a(16),p=a(17),d=a(18),_=a(43),m=a(182),h=a(402),b=(a(216),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"header"})}}]),t}(n.a.Component)),g=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement("div",null)}}]),t}(n.a.Component),f=a(19),v=a(130),y=a(166),E=a.n(y),j={full_list_urls:[],crawl_urls:!1,crawl_selectors:!1,partial_results:!1,final_results:!1,scraper_settings:{use_proxy:!1,scroll_page:!1}};var k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0,a=Object.assign({},e);switch(t.type){case"SET_FULL_LIST_URLS":return a.full_list_urls=t.full_list_urls,a;case"SET_SCRAPER_SETTINGS":return a.scraper_settings=t.scraper_settings,a;case"SET_CRAWL_URLS":return a.crawl_urls=t.crawl_urls,a;case"SET_CRAWL_SELECTORS":return a.crawl_selectors=t.crawl_selectors,a;case"SET_PARTIAL_RESULTS":return a.partial_results=t.partial_results,a;case"SET_FINAL_RESULTS":return a.final_results=t.final_results,a;default:return e}},O=Object(f.b)({GlobalReducer:k}),S={key:"root",storage:E.a},w=Object(v.a)(S,O),C=Object(f.c)(w),x=Object(v.b)(C),N=[{title:"Artist Name + Death Year + Birth Year",example:"Andy Warhol (1928-1987)",regex:/^([a-zA-Z\s]*)\s\(([0-9]*)-([0-9]*)\)/g,tags:["b4hkvqk7mc","ukvfzw8rep","anptku77fe"],regex_id:"6lZCSihs7w"},{title:"Currency + Floor Est. + Top Est.",example:"USD 400,000 - USD 600,000",regex:/^([A-Z]{3})\s([0-9\,\.]*)[\s\-A-Z]*([0-9\,\.]*)/g,tags:["tnjcrwnpwk","gup7bwnypd","zw7vvtnzb8"],regex_id:"ReRbEVeknb"},{title:"Hammer Price",example:"USD 400,000",regex:/^([A-Z]{3})\s([0-9\,\.]*)/g,tags:["tnjcrwnpwk","gup7bwnypd"],regex_id:"ReRbEVeknb"}],R=[{title:"Artist Name",type:"artist",tag_id:"b4hkvqk7mc",color:"#4811e3"},{title:"Artist Birth Year",type:"artist",tag_id:"ukvfzw8rep",color:"#14a998"},{title:"Artist Death Year",type:"artist",tag_id:"anptku77fe",color:"#cf04d9"},{title:"Artist Century",type:"artist",tag_id:"dxhp4dqaa4",color:"#95787d"},{title:"Artist Birth Place",type:"artist",tag_id:"rqvtase2mw",color:"#dc6843"},{title:"Artist Description",type:"artist",tag_id:"hzwxtyjamc",color:"#442734"},{title:"Artist Biography",type:"artist",tag_id:"ppcza3wpmr",color:"#c700ab"},{title:"Artist Source ID",type:"artist",tag_id:"5uxd2y4qad",color:"#1878df"},{title:"Artist Source URL",type:"artist",tag_id:"frvy5zxjyk",color:"#8506c7"},{title:"Object Name",type:"object",tag_id:"qghneam4vw",color:"#8d0710"},{title:"Object Image URL",type:"object",tag_id:"7sebgn9cdz",color:"#e17c2c"},{title:"Object Floor Estimation",type:"object",tag_id:"gup7bwnypd",color:"#b87f44"},{title:"Object Top Estimation",type:"object",tag_id:"zw7vvtnzb8",color:"#acb59d"},{title:"Object Hammer Price",type:"object",tag_id:"xnjcrwndcu",color:"#c10081"},{title:"Object Currency",type:"object",tag_id:"tnjcrwnpwk",color:"#d12031"},{title:"Object Medium",type:"object",tag_id:"bllxpawhkq",color:"#8faf11"},{title:"Object Size",type:"object",tag_id:"byzsma4rd6",color:"#d7c248"},{title:"Object Category",type:"object",tag_id:"9ahkujyhff",color:"#0760ad"},{title:"Object Description",type:"object",tag_id:"wjapmaqcmz",color:"#6b72dd"},{title:"Object Extra Info",type:"object",tag_id:"widhku9p2l",color:"#fe5012"},{title:"Object Lot Number",type:"object",tag_id:"ltlxihttlf",color:"#013ab0"},{title:"Object Year of Creation",type:"object",tag_id:"ghqcdd5hho",color:"#a871de"},{title:"Object Signature",type:"object",tag_id:"zol6lprlzd",color:"#ba35fe"},{title:"Object Provenance",type:"object",tag_id:"eseceqwdbt",color:"#328ea3"},{title:"Object Not Sold",type:"object",tag_id:"yafpgxc4yv",color:"#1789ad"},{title:"Object Source ID",type:"object",tag_id:"e3ssleqyge",color:"#fef7aa"},{title:"Object Source URL",type:"object",tag_id:"jvvvwwqwkj",color:"#3138cd"},{title:"Object Source Name",type:"object",tag_id:"bezgjdwvmt",color:"#06d650"},{title:"Auction Name",type:"auction",tag_id:"ebsfukecgm",color:"#39b386"},{title:"Auction Start Date",type:"auction",tag_id:"lsfhpccpb2",color:"#280439"},{title:"Auction End Date",type:"auction",tag_id:"fwyrbqpg5x",color:"#7bcfff"},{title:"Auction Image URL",type:"auction",tag_id:"cjzjtwgg7e",color:"#52c40e"},{title:"Auction City",type:"auction",tag_id:"fbqffkvcsm",color:"#33f346"},{title:"Auction Source ID",type:"auction",tag_id:"9zfpse5tbd",color:"#e8f9e2"},{title:"Auction Source URL",type:"auction",tag_id:"hx6y32mmt8",color:"#860073"},{title:"Auction Source Name",type:"auction",tag_id:"fkjshhqhqb",color:"#478913"},{title:"Auction House Name",type:"auction_house",tag_id:"eguarqp59r",color:"#167dd1"},{title:"Auction House Description",type:"auction_house",tag_id:"bddndnm4dx",color:"#162a8b"},{title:"Auction House Website",type:"auction_house",tag_id:"7zhbbdymd7",color:"#5f1579"},{title:"Auction House Phone",type:"auction_house",tag_id:"s9cfw7sjua",color:"#ca264f"},{title:"Auction House Address",type:"auction_house",tag_id:"hhcd2dadsp",color:"#819c50"},{title:"Auction House Source ID",type:"auction_house",tag_id:"wvpepsw2xc",color:"#92acb1"},{title:"Auction House Source URL",type:"auction_house",tag_id:"47qbbkug2a",color:"#1dd128"},{title:"Auction House Source Name",type:"auction_house",tag_id:"bkl5qunxls",color:"#906ec5"}],A=a(49),T=a(29),L=a(7),q=a(26),F=a(395),U=a(389),P=a(384),z=a(388),B=a(392),D=a(393),H=a(391),I=a(408),G=a(407),W=a(398),V=a(396),K=a(397),M=a(390),Y=a(400),J=a(403),Z=a(399),$=a(8),X=a.n($),Q=a(73),ee=a(74),te=a.n(ee),ae=a(62),re=a.n(ae);function se(e){return{type:"SET_FULL_LIST_URLS",full_list_urls:e}}function ne(e){return{type:"SET_SCRAPER_SETTINGS",scraper_settings:e}}function le(e){return{type:"SET_CRAWL_URLS",crawl_urls:e}}function ce(e){return{type:"SET_CRAWL_SELECTORS",crawl_selectors:e}}function oe(e){return{type:"SET_PARTIAL_RESULTS",partial_results:e}}function ie(e){return{type:"SET_FINAL_RESULTS",final_results:e}}a(224);function ue(e,t){return"false"!==t&&t}function pe(e){try{return document.querySelector(e),!0}catch(t){}return!1}var de=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={open_tags_dialog:!1,open_attributes_dialog:!1,is_selector_valid:!0,custom_attribute:""},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement(Q.a,null),n.a.createElement("div",{className:"home-selector-container",style:this.state.is_selector_valid?{}:{backgroundColor:"#fd676417"}},n.a.createElement("div",{className:"home-selector-input-container"},n.a.createElement(P.a,{label:"Dense multiline",fullWidth:!0,disableUnderline:!0,placeholder:"My Awesome CSS selector",defaultValue:this.props.config.css_selector,onChange:function(t){e.setState({is_selector_valid:pe(t.target.value)}),e.props.edit_selector(e.props.config.selector_id,t.target.value)}})),this.props.config.tag&&n.a.createElement("span",{style:{backgroundColor:this.props.config.tag.color},className:"home-tag-indicator"},this.props.config.tag.title),!this.props.config.tag&&n.a.createElement("span",{style:{backgroundColor:"#fd6764"},className:"home-tag-indicator"},"Post Process"),n.a.createElement("span",{style:{backgroundColor:"#361ffb",marginLeft:10,color:"white"},className:"home-tag-indicator"},this.props.config.attr),n.a.createElement("i",{className:"home-selector-icon material-icons",onClick:function(){return e.setState({open_tags_dialog:!0})}},"label"),n.a.createElement("i",{className:"home-selector-icon material-icons",onClick:function(){return e.setState({open_attributes_dialog:!0})}},"code"),n.a.createElement("i",{className:"home-selector-icon material-icons",onClick:function(){return e.props.remove_selector(e.props.config.selector_id)}},"close")),n.a.createElement(z.a,null),n.a.createElement(G.a,{onClose:function(){return e.setState({open_tags_dialog:!1})},open:this.state.open_tags_dialog,"aria-labelledby":"simple-dialog-title"},n.a.createElement(M.a,{id:"simple-dialog-title"},"Select a tag"),n.a.createElement(H.a,null,n.a.createElement(B.a,{style:{backgroundColor:"#eaeaea"},button:!0,onClick:function(){e.setState({open_tags_dialog:!1}),e.props.add_tag(e.props.config.selector_id,!1)},key:X()()},n.a.createElement(D.a,{primary:"Post process"})),R.map((function(t){return n.a.createElement(B.a,{button:!0,onClick:function(){e.setState({open_tags_dialog:!1}),e.props.add_tag(e.props.config.selector_id,t)},key:X()()},n.a.createElement(D.a,{primary:t.title}))})))),n.a.createElement(G.a,{onClose:function(){return e.setState({open_attributes_dialog:!1})},open:this.state.open_attributes_dialog,"aria-labelledby":"simple-dialog-title"},n.a.createElement(M.a,{id:"simple-dialog-title"},"Select an Attribute"),n.a.createElement(J.a,{style:{margin:10},label:"Custom Attribute",variant:"outlined",value:this.state.new_selector_set_name,onChange:function(t){return e.state.custom_attribute=t.target.value},onKeyDown:function(t){"Enter"===t.key&&e.props.add_attribute(e.props.config.selector_id,e.state.custom_attribute)}}),n.a.createElement(H.a,null,n.a.createElement(B.a,{button:!0,onClick:function(){e.setState({open_attributes_dialog:!1}),e.props.add_attribute(e.props.config.selector_id,"innerText")},key:X()()},n.a.createElement(D.a,{primary:"innerText"})),n.a.createElement(B.a,{button:!0,onClick:function(){e.setState({open_attributes_dialog:!1}),e.props.add_attribute(e.props.config.selector_id,"href")},key:X()()},n.a.createElement(D.a,{primary:"href"})),n.a.createElement(B.a,{button:!0,onClick:function(){e.setState({open_attributes_dialog:!1}),e.props.add_attribute(e.props.config.selector_id,"src")},key:X()()},n.a.createElement(D.a,{primary:"src"})),n.a.createElement(B.a,{button:!0,onClick:function(){e.setState({open_attributes_dialog:!1}),e.props.add_attribute(e.props.config.selector_id,"srcset")},key:X()()},n.a.createElement(D.a,{primary:"srcset"})),n.a.createElement(B.a,{button:!0,onClick:function(){e.setState({open_attributes_dialog:!1}),e.props.add_attribute(e.props.config.selector_id,"class")},key:X()()},n.a.createElement(D.a,{primary:"class"})),n.a.createElement(B.a,{button:!0,onClick:function(){e.setState({open_attributes_dialog:!1}),e.props.add_attribute(e.props.config.selector_id,"id")},key:X()()},n.a.createElement(D.a,{primary:"id"})))))}}]),t}(n.a.Component),_e=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={add_selector_field:"",selectors:a.props.crawl_selectors?a.props.crawl_selectors:{},urls:a.props.full_list_urls,snackbar_open:!1,snackbar_message:"",redirect:!1,new_selector_set_name:"",display_save_dialog:!1,display_load_dialog:!1,is_selector_set_loading:!0,available_selector_sets:[]},a.add_selector=a.add_selector.bind(Object(L.a)(a)),a.remove_selector=a.remove_selector.bind(Object(L.a)(a)),a.add_tag=a.add_tag.bind(Object(L.a)(a)),a.add_attribute=a.add_attribute.bind(Object(L.a)(a)),a.edit_selector=a.edit_selector.bind(Object(L.a)(a)),a.next=a.next.bind(Object(L.a)(a)),a.save=a.save.bind(Object(L.a)(a)),a.delete=a.delete.bind(Object(L.a)(a)),a.load=a.load.bind(Object(L.a)(a)),a.load_selectors=a.load_selectors.bind(Object(L.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"add_selector",value:function(){var e=Object.assign({},this.state.selectors),t=X()();e[t]={selector_id:t,css_selector:this.state.add_selector_field,tag:!1,regex:"",attr:"innerText",urls:[]},this.setState({selectors:e}),this.setState({add_selector_field:""}),this.props.actions.set_crawl_selectors(e)}},{key:"remove_selector",value:function(e){var t=Object.assign({},this.state.selectors);delete t[e],this.setState({selectors:t}),this.props.actions.set_crawl_selectors(t)}},{key:"add_tag",value:function(e,t){var a=Object.assign({},this.state.selectors);a[e].tag=t,this.setState({selectors:a}),this.props.actions.set_crawl_selectors(a)}},{key:"add_attribute",value:function(e,t){var a=Object.assign({},this.state.selectors);a[e].attr=t,this.setState({selectors:a}),this.props.actions.set_crawl_selectors(a)}},{key:"edit_selector",value:function(e,t){var a=Object.assign({},this.state.selectors);a[e].css_selector=t,this.state.selectors=a}},{key:"next",value:function(e){for(var t=Object.assign({},this.state.selectors),a=Object.keys(t).length-1;a>=0;a--){var r=Object.keys(t)[a];pe(t[r].css_selector)||delete t[r]}if(0===Object.keys(t).length)return this.setState({snackbar_message:"No proper CSS selector found"}),void this.setState({snackbar_open:!0});this.props.actions.set_crawl_selectors(t),this.setState({redirect:"/urls/"})}},{key:"load_selectors",value:function(){this.setState({is_selector_set_loading:!0}),this.setState({display_load_dialog:!0}),re.a.ajax({context:this,url:"http://13.59.2.237:5000/selector-sets/",type:"get",data:{},success:function(e){console.log(e),this.setState({available_selector_sets:e.selector_sets}),this.setState({is_selector_set_loading:!1})},error:function(e){},complete:function(e,t){},timeout:12e4})}},{key:"load",value:function(e){var t=JSON.parse(e,ue);this.setState({selectors:t}),this.setState({display_load_dialog:!1}),console.log(t)}},{key:"save",value:function(){if(0===this.state.new_selector_set_name.length)return this.setState({snackbar_message:"Please give your selector set a proper name"}),void this.setState({snackbar_open:!0});this.setState({display_save_dialog:!1}),re.a.ajax({context:this,url:"http://13.59.2.237:5000/save-selector-set/",type:"get",data:{selector_set:this.state.selectors,set_name:this.state.new_selector_set_name},success:function(e){"success"===e.status?(this.setState({snackbar_message:"Saved!"}),this.setState({snackbar_open:!0})):(this.setState({snackbar_message:"Sorry, I got an error..."}),this.setState({snackbar_open:!0}))},error:function(e){this.setState({snackbar_message:"Sorry, I got an error..."}),this.setState({snackbar_open:!0})},complete:function(e,t){},timeout:12e4})}},{key:"delete",value:function(e){this.setState({display_load_dialog:!1}),re.a.ajax({context:this,url:"http://13.59.2.237:5000/delete-selector-set/",type:"get",data:{hash_id:e},success:function(e){},error:function(e){},complete:function(e,t){},timeout:12e4})}},{key:"render",value:function(){var e=this;return this.state.redirect?n.a.createElement(A.a,{to:this.state.redirect}):n.a.createElement("div",{className:"home-main-container"},n.a.createElement(Q.a,null),n.a.createElement(U.a,{className:"home-section"},n.a.createElement("div",{className:"home-section-header"},n.a.createElement("div",null,n.a.createElement("div",{className:"home-section-header-title"},"Selectors"),n.a.createElement("div",{className:"home-section-header-subtitle"},"Add your CSS selectors and their respective tags")),n.a.createElement("div",null,n.a.createElement(F.a,{className:"home-run-button",variant:"contained",color:"secondary",onClick:this.load_selectors,style:{marginRight:10}},"LOAD"),n.a.createElement(F.a,{className:"home-run-button",variant:"contained",color:"secondary",onClick:function(){return e.setState({display_save_dialog:!0})},style:{marginRight:10}},"SAVE"),n.a.createElement(F.a,{className:"home-run-button",variant:"contained",color:"primary",onClick:this.next},"NEXT"))),n.a.createElement(te.a,{speed:.8,className:"home-section-body",contentClassName:"content",horizontal:!1,smoothScrolling:!0},n.a.createElement(n.a.Fragment,null,n.a.createElement("br",null),n.a.createElement(z.a,null),Object.keys(this.state.selectors).map((function(t){return n.a.createElement(de,{config:e.state.selectors[t],remove_selector:e.remove_selector,add_tag:e.add_tag,add_attribute:e.add_attribute,edit_selector:e.edit_selector,key:X()()})})),n.a.createElement("div",{className:"home-selector-container"},n.a.createElement("div",{className:"home-selector-input-container"},n.a.createElement(P.a,{label:"CSS Selector",fullWidth:!0,disableUnderline:!0,placeholder:"My Awesome CSS selector",value:this.state.add_selector_field,onChange:function(t){return e.setState({add_selector_field:t.target.value})},onKeyDown:function(t){"Enter"===t.key&&e.add_selector()}})),n.a.createElement("i",{className:"home-selector-icon material-icons",onClick:this.add_selector},"add")),n.a.createElement(z.a,null)))),n.a.createElement(G.a,{open:this.state.display_save_dialog,onClose:function(){return e.setState({display_save_dialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement(M.a,{id:"alert-dialog-title"},"Save Selector Set"),n.a.createElement(V.a,null,n.a.createElement(K.a,{id:"alert-dialog-description"},"Give your selector set a name. It should have a name that reminds you of the website and type of page you're parsing."),n.a.createElement(J.a,{style:{marginTop:10,marginBottom:10},fullWidth:!0,id:"outlined-basic",label:"Selecto Set Name",variant:"outlined",value:this.state.new_selector_set_name,onChange:function(t){return e.setState({new_selector_set_name:t.target.value})}})),n.a.createElement(W.a,null,n.a.createElement(F.a,{onClick:function(){return e.setState({display_save_dialog:!1})},color:"secondary",variant:"contained"},"CANCEL"),n.a.createElement(F.a,{onClick:this.save,color:"primary",variant:"contained"},"SAVE"))),n.a.createElement(G.a,{onClose:function(){return e.setState({display_load_dialog:!1})},"aria-labelledby":"simple-dialog-title",open:this.state.display_load_dialog},n.a.createElement(M.a,{id:"simple-dialog-title"},"Load Selector Set"),this.state.is_selector_set_loading&&n.a.createElement("div",{className:"home-load-dialog-progress-container"},n.a.createElement(Z.a,null)),!this.state.is_selector_set_loading&&n.a.createElement(H.a,null,this.state.available_selector_sets.map((function(t){return n.a.createElement(B.a,{className:"home-load-dialog-item"},n.a.createElement(D.a,{onClick:function(){return e.load(t.selectors_json)},primary:t.set_name}),n.a.createElement(Y.a,{onClick:function(){return e.delete(t.hash_id)},className:"home-load-dialog-delete-button"},n.a.createElement("i",{className:"material-icons"},"delete")))})))),n.a.createElement(I.a,{message:this.state.snackbar_message,open:this.state.snackbar_open,autoHideDuration:5e3,onClose:function(){return e.setState({snackbar_open:!1})}}))}}]),t}(n.a.Component);var me=Object(q.b)((function(e){return{crawl_selectors:e.GlobalReducer.crawl_selectors}}),(function(e){return{actions:Object(f.a)(Object(T.a)({},r),e)}}))(_e),he=a(405),be=a(127),ge=a.n(be),fe=a(128),ve=a.n(fe);a(227);function ye(e){for(var t="",a=Object.keys(e),r=a.length-1;r>=0;r--){t=t+e[a[r]].url+"\n"}return t}var Ee=function(e){function t(e){var a;Object(o.a)(this,t),a=Object(u.a)(this,Object(p.a)(t).call(this,e));for(var r=Object.assign({},a.props.full_list_urls),s=Object.keys(r),n=s.length-1;n>=0;n--){r[s[n]].status="in_queue"}return a.state={add_selector_field:"",urls:r,scraper_settings:a.props.scraper_settings},a.url_list_changed=a.url_list_changed.bind(Object(L.a)(a)),a.run=a.run.bind(Object(L.a)(a)),a.use_proxy_changed=a.use_proxy_changed.bind(Object(L.a)(a)),a.scroll_page_changed=a.scroll_page_changed.bind(Object(L.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"url_list_changed",value:function(e){for(var t=Object.assign({},{}),a=e.target.value.split("\n"),r=X()(),s=a.length-1;s>=0;s--)t[r=X()()]={url:a[s],url_id:r,status:"in_queue",page_source:!1,response_code:!1};this.props.actions.set_full_list_urls(t),this.state.urls=t}},{key:"run",value:function(e){for(var t,a,r=Object.assign({},this.state.urls),s=Object.keys(r).length-1;s>=0;s--){var n=Object.keys(r)[s];void 0!==ve()({website:r[n].url.trim()},{website:{url:!0}})&&delete r[n]}for(s=r.length-1;s>=0;s--){void 0!==ve()({website:r[s]},{website:{url:!0}})&&r.splice(s,1)}if(0===Object.keys(r).length)return this.setState({snackbar_message:"No proper URLs found"}),void this.setState({snackbar_open:!0});!e&&Object.keys(r).length>3&&(t=r,a=3,r=Object.keys(t).sort().slice(0,a).reduce((function(e,a){return e[a]=t[a],e}),{})),this.props.actions.set_crawl_urls(r),this.setState({redirect:"/progress/"})}},{key:"use_proxy_changed",value:function(e,t){var a=ge()(this.state,{scraper_settings:{use_proxy:{$set:t}}});this.props.actions.set_scraper_settings(a.scraper_settings),this.setState(a)}},{key:"scroll_page_changed",value:function(e,t){var a=ge()(this.state,{scraper_settings:{scroll_page:{$set:t}}});this.props.actions.set_scraper_settings(a.scraper_settings),this.setState(a)}},{key:"render",value:function(){var e=this;return this.state.redirect?n.a.createElement(A.a,{to:this.state.redirect}):n.a.createElement("div",{className:"urls-main-container"},n.a.createElement(Q.a,null),n.a.createElement(U.a,{className:"urls-section"},n.a.createElement("div",{className:"urls-section-header"},n.a.createElement("div",null,n.a.createElement("div",{className:"urls-section-header-title"},"URLs to scrape"),n.a.createElement("div",{className:"urls-section-header-subtitle"},"URL list here - One per line")),n.a.createElement("div",null,n.a.createElement(F.a,{className:"urls-run-sample-button",variant:"contained",color:"secondary",onClick:function(){return e.setState({redirect:"/"})}},"BACK"),n.a.createElement(F.a,{className:"urls-run-sample-button",variant:"contained",color:"secondary","data-tip":"Run a sample of 3 URLs only",onClick:function(){return e.run(!1)}},"RUN SAMPLE"),n.a.createElement(F.a,{className:"urls-run-button",variant:"contained",color:"primary",onClick:function(){return e.run(!0)}},"RUN"))),n.a.createElement("div",{className:"urls-section-body"},n.a.createElement("br",null),n.a.createElement(J.a,{id:"outlined-dense-multiline",label:"URL List",margin:"dense",variant:"outlined",multiline:!0,fullWidth:!0,defaultValue:ye(this.state.urls),onChange:this.url_list_changed}))),n.a.createElement(U.a,{className:"urls-section"},n.a.createElement("div",{className:"urls-section-header"},n.a.createElement("div",null,n.a.createElement("div",{className:"urls-section-header-title"},"Scraper options"),n.a.createElement("div",{className:"urls-section-header-subtitle"},"The settings to use when requesting the listed URLs."))),n.a.createElement("div",{className:"urls-section-body"},n.a.createElement("br",null),n.a.createElement("div",null,n.a.createElement(he.a,{checked:this.state.scraper_settings.use_proxy,onChange:this.use_proxy_changed,color:"primary"}),n.a.createElement("span",null,"Use proxies on every request")),n.a.createElement("div",null,n.a.createElement(he.a,{checked:this.state.scraper_settings.scroll_page,onChange:this.scroll_page_changed,color:"primary"}),n.a.createElement("span",null,"Scroll page all the way before parsing")))),n.a.createElement(I.a,{message:this.state.snackbar_message,open:this.state.snackbar_open,onClose:function(){return e.setState({snackbar_open:!1})}}))}}]),t}(n.a.Component);var je=Object(q.b)((function(e){return{full_list_urls:e.GlobalReducer.full_list_urls,scraper_settings:e.GlobalReducer.scraper_settings}}),(function(e){return{actions:Object(f.a)(Object(T.a)({},r),e)}}))(Ee),ke=a(401),Oe=(a(228),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={urls:a.props.crawl_urls,in_queue_counter:0,initial_queue_size:0,redirect:!1,matches:{}},a.crawl=a.crawl.bind(Object(L.a)(a)),a.crawl_next=a.crawl_next.bind(Object(L.a)(a)),a.count_in_queue=a.count_in_queue.bind(Object(L.a)(a)),a.update_queue=a.update_queue.bind(Object(L.a)(a)),a.crawl_finished=a.crawl_finished.bind(Object(L.a)(a)),a.state.initial_queue_size=a.count_in_queue(),a.crawl_next(),a.state.in_queue_counter=a.count_in_queue()+1,a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"crawl_next",value:function(){for(var e=Object.assign({},this.state.urls),t=0;t<Object.keys(e).length;t++){var a=Object.keys(e)[t],r=e[a];if("in_queue"===r.status)return e[a].status="scraping",this.setState({urls:e}),this.update_queue(),void this.crawl(r)}this.crawl_finished()}},{key:"crawl",value:function(e){var t=Object.keys(this.props.crawl_selectors);this.state.matches[e.url_id]={};for(var a=t.length-1;a>=0;a--){var r=t[a];this.state.matches[e.url_id][r]=[]}re.a.ajax({context:this,url:"http://13.59.2.237:5000/scrape/",type:"get",data:{url:e.url,selectors:this.props.crawl_selectors,settings:this.props.scraper_settings},success:function(t){this.state.matches[e.url_id]=Object.assign(this.state.matches[e.url_id],t.matches);var a=Object.assign({},this.state.urls);a[e.url_id].status=t.status,a[e.url_id].page_source=t.page_source,a[e.url_id].response_code=t.response_code,this.setState({urls:a}),this.crawl_next()},error:function(t){var a=Object.assign({},this.state.urls);a[e.url_id].status="error",this.setState({urls:a}),this.crawl_next()},complete:function(e,t){this.update_queue()},timeout:12e4})}},{key:"count_in_queue",value:function(){for(var e=0,t=Object.keys(this.state.urls).length-1;t>=0;t--){var a=Object.keys(this.state.urls)[t];"in_queue"===this.state.urls[a].status&&(e+=1)}return e}},{key:"update_queue",value:function(){var e=this.count_in_queue();this.setState({in_queue_counter:e+1})}},{key:"crawl_finished",value:function(){this.props.actions.set_crawl_urls(this.state.urls),this.props.actions.set_partial_results(this.state.matches),this.setState({redirect:"/partial-results/"})}},{key:"render",value:function(){var e=this;return this.state.redirect?n.a.createElement(A.a,{to:this.state.redirect}):n.a.createElement("div",{className:"progress-main-container"},n.a.createElement(U.a,{className:"progress-section"},n.a.createElement("div",{className:"progress-section-header"},n.a.createElement("div",{className:"progress-section-header-title"},"Now running..."),n.a.createElement(F.a,{className:"home-run-button",variant:"contained",color:"secondary",onClick:function(){return e.setState({redirect:"/urls/"})}},"CANCEL")),n.a.createElement(ke.a,{className:"progress-loading-bar",variant:"determinate",value:(this.state.initial_queue_size-this.state.in_queue_counter)/this.state.initial_queue_size*100}),n.a.createElement("div",{className:"progress-section-progress-legend"},this.state.initial_queue_size-this.state.in_queue_counter,"/",this.state.initial_queue_size," urls processed")),n.a.createElement(U.a,{className:"progress-section"},n.a.createElement("div",{className:"progress-section-header-title"},"Crawl Results"),n.a.createElement(n.a.Fragment,null,n.a.createElement("br",null),n.a.createElement(z.a,null),n.a.createElement("div",{className:"progress-section-url-container"},Object.keys(this.state.urls).map((function(t){return n.a.createElement(n.a.Fragment,{key:X()()},n.a.createElement("div",{className:"progress-item",key:X()()},n.a.createElement("div",{key:X()(),className:"progress-item-url"},e.state.urls[t].url),n.a.createElement("div",{key:X()(),className:"progress-item-status"},e.state.urls[t].status)),n.a.createElement(z.a,{key:X()()}))}))))))}}]),t}(n.a.Component));var Se=Object(q.b)((function(e){return{crawl_urls:e.GlobalReducer.crawl_urls,crawl_selectors:e.GlobalReducer.crawl_selectors,scraper_settings:e.GlobalReducer.scraper_settings}}),(function(e){return{actions:Object(f.a)(Object(T.a)({},r),e)}}))(Oe),we=a(404),Ce=a(123),xe=a(40),Ne=a.n(xe),Re=a(32),Ae=a(102),Te=a(103),Le=a(168),qe=a.n(Le);a(237);function Fe(e,t){if("innerText"===t)return e.structuredText;var a=e.getAttribute(t);return null==a?"":a}function Ue(e,t,a){for(var r=[],s=[],n=0;n<Object.keys(t).length;n++){var l=t[Object.keys(t)[n]];s.push(l.tag.title?l.tag.title:"Post Process")}var c=["URL","Status","Response Code"].concat(s);r.push(c);for(var o=0;o<Object.keys(e).length;o++){var i=[],u=Object.keys(e)[o],p=e[u];i.push(p.url),i.push(p.status?p.status:""),i.push(p.response_code);for(n=0;n<Object.keys(t).length;n++){var d=Object.keys(t)[n];0===a[u][d].length?i.push(""):1===a[u][d].length?null!==a[u][d][0].text?i.push(a[u][d][0].text.replace(/(\r\n|\n|\r)/gm," ")):i.push(""):i.push(JSON.stringify(a[u][d]).replace(/(\r\n|\n|\r)/gm," "))}r.push(i)}return r}var Pe=Te.a.div({pressable:!0,init:{scale:1},press:{scale:.98}}),ze=function(e){function t(e){var a;Object(o.a)(this,t);var r=function(e,t){for(var a={},r=Object.keys(e).length-1;r>=0;r--){var s=Object.keys(e)[r],n=e[s];if(a[s]={},"success"===n.status)for(var l=Object(Ce.parse)(n.page_source),c=Object.keys(t).length-1;c>=0;c--){var o=Object.keys(t)[c],i=t[o],u=l.querySelector(i.css_selector),p=l.querySelectorAll(i.css_selector);if(null!==u)if(p.length>1){for(var d={data_type:"json",matches:[]},_={data_type:"json",matches:[]},m=p.length-1;m>=0;m--){var h=p[m];d.matches.push(Fe(h,i.attr)),_.matches.push(h.outerHTML)}a[s][o]={data_type:"json",text:JSON.stringify(d),html:JSON.stringify(_)}}else a[s][o]={data_type:"single",text:Fe(u,i.attr),html:u.outerHTML};else a[s][o]=!1}else for(c=Object.keys(t).length-1;c>=0;c--){var b=Object.keys(t)[c];a[s][b]=!1}}return a}((a=Object(u.a)(this,Object(p.a)(t).call(this,e))).props.crawl_urls,a.props.crawl_selectors);return a.state={matches:r,redirect:!1,open_dialog:!1,dialog_json:[],dialog_url:""},a.use_result_as_urls=a.use_result_as_urls.bind(Object(L.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"use_result_as_urls",value:function(){var e=document.createElement("a");e.setAttribute("href",this.state.dialog_url);var t=e.protocol+"//"+e.hostname;e.port.length>0&&(t=t+":"+e.port);for(var a=new RegExp("^(?:[a-z]+:)?//","i"),r={},s=this.state.dialog_json.length-1;s>=0;s--){var n=this.state.dialog_json[s].text.trim();if(a.test(n)){var l=X()();r[l]={url:n,url_id:l,status:"in_queue",page_source:!1,response_code:!1}}else{var c=X()();r[c]={url:t+n,url_id:c,status:"in_queue",page_source:!1,response_code:!1}}}this.setState({open_dialog:!1}),this.props.actions.set_full_list_urls(r),this.setState({redirect:"/"})}},{key:"render",value:function(){var e=this;return this.state.redirect?n.a.createElement(A.a,{to:this.state.redirect}):n.a.createElement("div",{className:"partial-main-container"},n.a.createElement(U.a,{className:"partial-section"},n.a.createElement("div",{className:"partial-section-header"},n.a.createElement("div",null,n.a.createElement("div",{className:"partial-section-header-title"},"Partial Results"),n.a.createElement("div",{className:"partial-section-header-subtitle"},"Data parsed using the scraper results before post processing")),n.a.createElement("div",null,n.a.createElement(F.a,{className:"post-process-previous-button",variant:"contained",color:"secondary",onClick:function(){return e.setState({redirect:"/urls/"})}},"BACK"),n.a.createElement(Ae.CSVLink,{separator:"|",enclosingCharacter:'"',filename:"pipe-separated-partial-data.csv",data:Ue(this.props.crawl_urls,this.props.crawl_selectors,this.props.partial_results)},n.a.createElement(F.a,{className:"partial-download-button",variant:"contained",color:"secondary"},"DOWNLOAD")),n.a.createElement(F.a,{className:"partial-postprocess-button",variant:"contained",color:"primary",onClick:function(){e.setState({redirect:"/post-process/"})}},"Post Process"))),n.a.createElement("div",{className:"partial-section-body"},n.a.createElement("div",{className:"table-container"},n.a.createElement(we.a,{collapsing:!0,celled:!0},n.a.createElement(we.a.Header,null,n.a.createElement(we.a.Row,null,n.a.createElement(we.a.HeaderCell,null,"URL"),Object.keys(this.props.crawl_selectors).map((function(t){return n.a.createElement(we.a.HeaderCell,null,e.props.crawl_selectors[t].tag.title?e.props.crawl_selectors[t].tag.title:"Post Process")})),n.a.createElement(we.a.HeaderCell,null,"Status"),n.a.createElement(we.a.HeaderCell,null,"Response Code"))),n.a.createElement(we.a.Body,null,Object.keys(this.props.crawl_urls).map((function(t){return n.a.createElement(we.a.Row,{key:X()()},n.a.createElement(we.a.Cell,null,n.a.createElement(Pe,null,n.a.createElement(Re.CopyToClipboard,{text:e.props.crawl_urls[t].url},n.a.createElement(Ne.a,{text:e.props.crawl_urls[t].url,length:"70"})))),Object.keys(e.props.crawl_selectors).map((function(a){return n.a.createElement(we.a.Cell,null,n.a.createElement(Pe,null,1===e.props.partial_results[t][a].length&&n.a.createElement(Re.CopyToClipboard,{text:e.props.partial_results[t][a][0].text},n.a.createElement(Ne.a,{text:null===e.props.partial_results[t][a][0].text?"":e.props.partial_results[t][a][0].text,length:"70"})),e.props.partial_results[t][a].length>1&&n.a.createElement("span",{className:"partial-multiple-found",onClick:function(){e.setState({dialog_json:e.props.partial_results[t][a]}),e.state.dialog_url=e.props.crawl_urls[t].url,e.setState({open_dialog:!0})}},"Multiple Found")))})),n.a.createElement(we.a.Cell,null,n.a.createElement(Pe,null,n.a.createElement(Re.CopyToClipboard,{text:e.props.crawl_urls[t].status},n.a.createElement(Ne.a,{text:e.props.crawl_urls[t].status,length:"70"})))),n.a.createElement(we.a.Cell,null,n.a.createElement(Pe,null,n.a.createElement(Re.CopyToClipboard,{text:e.props.crawl_urls[t].response_code.toString()},n.a.createElement(Ne.a,{text:e.props.crawl_urls[t].response_code.toString(),length:"70"})))))}))))))),n.a.createElement(G.a,{open:this.state.open_dialog,onClose:function(){return e.setState({open_dialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},n.a.createElement(M.a,{id:"alert-dialog-title"},"Your selector returned multiple elements"),n.a.createElement(V.a,null,n.a.createElement(K.a,{id:"alert-dialog-description"},n.a.createElement(qe.a,{collapsed:!0,src:this.state.dialog_json}))),n.a.createElement(W.a,null,n.a.createElement(F.a,{variant:"contained",color:"secondary",onClick:function(){return e.setState({open_dialog:!1})}},"CLOSE"),n.a.createElement(F.a,{variant:"contained",color:"primary",onClick:this.use_result_as_urls},"USE AS URLS"))))}}]),t}(n.a.Component);var Be=Object(q.b)((function(e){return{crawl_urls:e.GlobalReducer.crawl_urls,crawl_selectors:e.GlobalReducer.crawl_selectors,partial_results:e.GlobalReducer.partial_results}}),(function(e){return{actions:Object(f.a)(Object(T.a)({},r),e)}}))(ze),De=a(177),He=a(129),Ie=a.n(He),Ge=(a(347),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"post-process-selector-container"},n.a.createElement("div",{className:"post-process-selector-input-container"},n.a.createElement(P.a,{label:"Dense multiline",fullWidth:!0,disableUnderline:!0,placeholder:"",defaultValue:this.props.match.text,onChange:function(e){}})),n.a.createElement("span",{style:{backgroundColor:this.props.match.tag.color},className:"post-process-tag-indicator"},this.props.match.tag.title),n.a.createElement(Re.CopyToClipboard,{text:this.props.match.text},n.a.createElement("i",{className:"post-process-selector-icon material-icons"},"flip_to_front")),n.a.createElement("i",{className:"post-process-selector-icon material-icons",onClick:function(){return e.props.parent.remove_match(e.props.match.tag.tag_id)}},"close")),n.a.createElement(z.a,null))}}]),t}(n.a.Component)),We=window.setTimeout((function(){}),1),Ve=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={is_open:!1,close_timeout:!1,current_selection:""},a.popover_close=a.popover_close.bind(Object(L.a)(a)),a.popover_open=a.popover_open.bind(Object(L.a)(a)),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"popover_open",value:function(){var e=window.getSelection().toString();this.props.parent.state.current_selection=e,window.clearTimeout(We),this.setState({is_open:!0})}},{key:"popover_close",value:function(){var e=this;window.clearTimeout(We),We=window.setTimeout((function(){e.setState({is_open:!1}),e.props.parent.state.current_selection=""}),400)}},{key:"render",value:function(){return n.a.createElement(n.a.Fragment,null,this.props.children,n.a.createElement(De.a,{selectionRef:this.props.ref_element,isOpen:this.state.is_open,onTextSelect:this.popover_open,onTextUnselect:this.popover_close}))}}]),t}(n.a.Component);function Ke(e,t,a,r){for(var s=[],n=0;n<Object.keys(t).length;n++){var l=t[Object.keys(t)[n]];l.tag&&s.push(l.tag.tag_id)}for(n=r.length-1;n>=0;n--)for(var c=0;c<Object.keys(r[n].post_processed).length;c++){var o=Object.keys(r[n].post_processed)[c],i=r[n].post_processed[o];s.push(i.tag.tag_id)}var u={};for(n=0;n<Object.keys(e).length;n++){var p=e[Object.keys(e)[n]];if("success"===p.status){u[p.url_id]={};for(c=s.length-1;c>=0;c--){var d=s[c];u[p.url_id][d]=[]}}}for(n=0;n<Object.keys(a).length;n++){var _=Object.keys(a)[n],m=a[_];for(c=0;c<Object.keys(m).length;c++){var h=Object.keys(m)[c],b=t[h],g=m[h],f=b.tag;f&&(u[_][f.tag_id]=g)}}for(n=r.length-1;n>=0;n--){var v=r[n].url.url_id,y=r[n].post_processed;for(c=0;c<Object.keys(y).length;c++){var E=y[Object.keys(y)[c]];u[v][E.tag.tag_id]=[{text:E.text,html:E.text}]}}return u}function Me(e){for(var t=R.length-1;t>=0;t--)if(R[t].tag_id===e)return R[t];return!1}var Ye=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).ref_text=n.a.createRef(),a.ref_html=n.a.createRef();var r=function(e,t,a){for(var r=[],s=0;s<Object.keys(e).length;s++){var n=Object.keys(e)[s],l=e[n];if("success"===l.status)for(var c=0;c<Object.keys(t).length;c++){var o=Object.keys(t)[c],i=t[o];if(!1===i.tag)for(var u=a[n][o].length-1;u>=0;u--)r.push({match:a[n][o][u],selector:i,url:l,post_processed:{}})}}return r}(a.props.crawl_urls,a.props.crawl_selectors,a.props.partial_results);if(a.state={current_match_index:0,to_post_process_array:r,current_selection:"",redirect:!1,current_tag_type:"",render_divider:!1,snackbar_open:!1,snackbar_message:""},a.add_regex_match=a.add_regex_match.bind(Object(L.a)(a)),a.add_match=a.add_match.bind(Object(L.a)(a)),a.remove_match=a.remove_match.bind(Object(L.a)(a)),a.clear_matches=a.clear_matches.bind(Object(L.a)(a)),a.finish_post_process=a.finish_post_process.bind(Object(L.a)(a)),a.next=a.next.bind(Object(L.a)(a)),a.previous=a.previous.bind(Object(L.a)(a)),0===a.state.to_post_process_array.length){var s=Ke(a.props.crawl_urls,a.props.crawl_selectors,a.props.partial_results,a.state.to_post_process_array);a.props.actions.set_final_results(s),a.state.redirect="/final-results/"}return a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"add_match",value:function(e){var t=this.state.to_post_process_array.slice();t[this.state.current_match_index].post_processed[e.tag_id]={text:this.state.current_selection,html:this.state.current_selection,tag:e},this.setState({to_post_process_array:t})}},{key:"add_regex_match",value:function(e){var t=this.state.to_post_process_array[this.state.current_match_index].match.text,a=e.regex.exec(t);if(null!==a)if(a.length===e.tags.length+1)for(var r=1;r<a.length;r++){var s=a[r],n=e.tags[r-1],l=Me(n),c=this.state.to_post_process_array.slice();c[this.state.current_match_index].post_processed[n]={text:s,html:s,tag:l},this.setState({to_post_process_array:c})}else this.setState({snackbar_open:!0}),this.setState({snackbar_message:"No perfect match found"});else this.setState({snackbar_open:!0}),this.setState({snackbar_message:"No match found"})}},{key:"remove_match",value:function(e){var t=this.state.to_post_process_array.slice();delete t[this.state.current_match_index].post_processed[e],this.setState({to_post_process_array:t})}},{key:"clear_matches",value:function(){for(var e=this.state.to_post_process_array.slice(),t=Object.keys(e[this.state.current_match_index].post_processed).length-1;t>=0;t--){var a=Object.keys(e[this.state.current_match_index].post_processed)[t];delete e[this.state.current_match_index].post_processed[a]}this.setState({to_post_process_array:e})}},{key:"finish_post_process",value:function(){var e=Ke(this.props.crawl_urls,this.props.crawl_selectors,this.props.partial_results,this.state.to_post_process_array);this.props.actions.set_final_results(e),this.setState({redirect:"/final-results/"})}},{key:"next",value:function(){this.state.current_match_index<this.state.to_post_process_array.length-1&&this.setState({current_match_index:this.state.current_match_index+1})}},{key:"previous",value:function(){this.state.current_match_index>0&&this.setState({current_match_index:this.state.current_match_index-1})}},{key:"render",value:function(){var e=this;return this.state.redirect?n.a.createElement(A.a,{to:this.state.redirect}):n.a.createElement(n.a.Fragment,null,n.a.createElement(Ie.a,{keys:"Right",onKeysPressed:this.next}),n.a.createElement(Ie.a,{keys:"Left",onKeysPressed:this.previous}),n.a.createElement("div",{className:"post-process-main-container"},n.a.createElement("div",{className:"post-process-main-container-inner"},n.a.createElement(ke.a,{variant:"determinate",value:this.state.current_match_index/this.state.to_post_process_array.length*100}),n.a.createElement(U.a,{className:"post-process-section"},n.a.createElement("div",{className:"post-process-section-header"},n.a.createElement("div",null,n.a.createElement("div",{className:"post-process-section-header-title"},"Post Processing"),n.a.createElement("div",{className:"post-process-section-header-subtitle"},"Please highlight and tag all the content accordingly")),n.a.createElement("div",null,n.a.createElement("a",{href:this.state.to_post_process_array[this.state.current_match_index].url.url,rel:"noopener noreferrer",target:"_blank"},n.a.createElement(F.a,{className:"post-process-previous-button",variant:"contained",color:"secondary"},"VISIT PAGE")),0===this.state.current_match_index&&n.a.createElement(F.a,{className:"post-process-previous-button",variant:"contained",color:"primary",onClick:function(){return e.setState({redirect:"/partial-results/"})}},"BACK"),this.state.current_match_index>0&&n.a.createElement(F.a,{className:"post-process-previous-button",variant:"contained",color:"primary",onClick:this.previous},"PREVIOUS"),this.state.current_match_index<this.state.to_post_process_array.length-1&&n.a.createElement(F.a,{className:"post-process-next-button",variant:"contained",color:"primary",onClick:this.next},"NEXT"),this.state.current_match_index===this.state.to_post_process_array.length-1&&n.a.createElement(F.a,{className:"post-process-next-button",variant:"contained",color:"primary",onClick:this.finish_post_process},"FINISH"))),n.a.createElement("div",{className:"post-process-section-body"},n.a.createElement("br",null),n.a.createElement("div",{className:"post-process-section-body-inner"},n.a.createElement(te.a,{className:"post-process-section-body-left",verticalContainerStyle:{width:4}},n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"post-process-popover-divider-title"},"Regex Selectors"),n.a.createElement(z.a,null)),N.map((function(t){return n.a.createElement("div",{className:"post-process-popover-regex",key:X()(),onClick:function(){e.add_regex_match(t)}},n.a.createElement("div",{className:"post-process-popover-tag-regex-name",key:X()()},t.title),n.a.createElement("div",{className:"post-process-popover-tag-regex-example",key:X()()},t.example))})),R.map((function(t){return t.type!==e.state.current_tag_type?(e.state.current_tag_type=t.type,e.state.render_divider=!0):e.state.render_divider=!1,n.a.createElement(n.a.Fragment,null,e.state.render_divider&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"post-process-popover-divider-title"},e.state.current_tag_type),n.a.createElement(z.a,null)),n.a.createElement("div",{className:"post-process-popover-tag",key:X()(),onClick:function(){e.add_match(t)}},n.a.createElement("div",{className:"post-process-popover-tag-color",style:{backgroundColor:t.color},key:X()()}),n.a.createElement("div",{className:"post-process-popover-tag-title",key:X()()},t.title)))}))),n.a.createElement("div",{className:"post-process-section-body-right"},n.a.createElement(Ve,{parent:this,ref_element:this.ref_text},n.a.createElement("div",{className:"post-process-raw-text",contentEditable:"true",ref:this.ref_text},this.state.to_post_process_array[this.state.current_match_index].match.text)),n.a.createElement(Ve,{parent:this,ref_element:this.ref_html},n.a.createElement("div",{className:"post-process-raw-html",contentEditable:"true",ref:this.ref_html},this.state.to_post_process_array[this.state.current_match_index].match.html)))))),n.a.createElement(U.a,{className:"post-process-section"},n.a.createElement("div",{className:"post-process-section-header"},n.a.createElement("div",null,n.a.createElement("div",{className:"post-process-section-header-title"},"Current Tags"),n.a.createElement("div",{className:"post-process-section-header-subtitle"},"These are the tags selected so far")),n.a.createElement("div",null,n.a.createElement(F.a,{className:"post-process-next-button",variant:"contained",color:"primary",onClick:this.clear_matches},"CLEAR"))),n.a.createElement("br",null),Object.keys(this.state.to_post_process_array[this.state.current_match_index].post_processed).length>0&&n.a.createElement(z.a,null),n.a.createElement(te.a,{className:"post-process-section-body post-process-matcehs-section"},Object.keys(this.state.to_post_process_array[this.state.current_match_index].post_processed).map((function(t){var a=e.state.to_post_process_array[e.state.current_match_index].post_processed[t];return n.a.createElement(Ge,{parent:e,match:a,key:X()()})})))))),n.a.createElement(I.a,{open:this.state.snackbar_open,onClose:function(){return e.setState({snackbar_open:!1})},message:this.state.snackbar_message}))}}]),t}(n.a.Component);var Je=Object(q.b)((function(e){return{crawl_urls:e.GlobalReducer.crawl_urls,crawl_selectors:e.GlobalReducer.crawl_selectors,partial_results:e.GlobalReducer.partial_results}}),(function(e){return{actions:Object(f.a)(Object(T.a)({},r),e)}}))(Ye);a(348);var Ze=Te.a.div({pressable:!0,init:{scale:1},press:{scale:.98}});function $e(e,t,a){for(var r,s=[],n=[],l=(r=e,Object.keys(r)[0]),c=Object.keys(e[l]).length-1;c>=0;c--){var o=Object.keys(e[l])[c];n.push(t[o].title)}var i=["URL","Status","Response Code"].concat(n);s.push(i);for(c=Object.keys(e).length-1;c>=0;c--){var u=[],p=Object.keys(e)[c];u.push(a[p].url),u.push(a[p].status),u.push(a[p].response_code);for(var d=Object.keys(e[p]).length-1;d>=0;d--){var _=Object.keys(e[p])[d];e[p][_].length>0?u.push(e[p][_][0].text.replace(/(\r\n|\n|\r)/gm," ")):u.push("")}s.push(u)}return s}var Xe=function(e){function t(e){var a;Object(o.a)(this,t),a=Object(u.a)(this,Object(p.a)(t).call(this,e));var r=function(e){for(var t={},a=e.length-1;a>=0;a--){var r=e[a];t[r.tag_id]=r}return t}(R);return a.state={tags:r,csv_data:$e(a.props.final_results,r,a.props.crawl_urls),redirect:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this;return this.state.redirect?n.a.createElement(A.a,{to:this.state.redirect}):n.a.createElement("div",{className:"final-main-container"},n.a.createElement(U.a,{className:"final-section"},n.a.createElement("div",{className:"final-section-header"},n.a.createElement("div",null,n.a.createElement("div",{className:"final-section-header-title"},"Final Results"),n.a.createElement("div",{className:"final-section-header-subtitle"},"Data parsed using the scraper results after post processing")),n.a.createElement("div",null,n.a.createElement(F.a,{className:"final-home-button",variant:"contained",color:"secondary",onClick:function(){e.setState({redirect:"/"})}},"Home"),n.a.createElement(Ae.CSVLink,{separator:"|",enclosingCharacter:'"',filename:"pipe-separated-final-data.csv",data:this.state.csv_data},n.a.createElement(F.a,{className:"final-download-button",variant:"contained",color:"primary"},"DOWNLOAD")))),n.a.createElement("div",{className:"final-section-body"},n.a.createElement("div",{className:"table-container"},n.a.createElement(we.a,{collapsing:!0,celled:!0},n.a.createElement(we.a.Header,null,n.a.createElement(we.a.Row,null,n.a.createElement(we.a.HeaderCell,null,"URL"),Object.keys(this.props.final_results[Object.keys(this.props.final_results)[0]]).map((function(t){return n.a.createElement(we.a.HeaderCell,{key:X()()},e.state.tags[t].title)})),n.a.createElement(we.a.HeaderCell,null,"Status"),n.a.createElement(we.a.HeaderCell,null,"Response Code"))),n.a.createElement(we.a.Body,null,Object.keys(this.props.final_results).map((function(t){return n.a.createElement(we.a.Row,{key:X()()},n.a.createElement(we.a.Cell,null,n.a.createElement(Ze,null,n.a.createElement(Re.CopyToClipboard,{text:e.props.crawl_urls[t].url},n.a.createElement(Ne.a,{text:e.props.crawl_urls[t].url,length:"70"})))),Object.keys(e.props.final_results[t]).map((function(a){return n.a.createElement(we.a.Cell,{key:X()()},n.a.createElement(Ze,null,n.a.createElement(Re.CopyToClipboard,{text:e.props.final_results[t][a].length>0?e.props.final_results[t][a][0].text:""},n.a.createElement(Ne.a,{text:e.props.final_results[t][a].length>0?e.props.final_results[t][a][0].text:"",length:"70"}))))})),n.a.createElement(we.a.Cell,null,n.a.createElement(Ze,null,n.a.createElement(Re.CopyToClipboard,{text:e.props.crawl_urls[t].status},n.a.createElement(Ne.a,{text:e.props.crawl_urls[t].status,length:"70"})))),n.a.createElement(we.a.Cell,null,n.a.createElement(Ze,null,n.a.createElement(Re.CopyToClipboard,{text:e.props.crawl_urls[t].response_code.toString()},n.a.createElement(Ne.a,{text:e.props.crawl_urls[t].response_code.toString(),length:"70"})))))}))))))))}}]),t}(n.a.Component);var Qe=Object(q.b)((function(e){return{crawl_urls:e.GlobalReducer.crawl_urls,crawl_selectors:e.GlobalReducer.crawl_selectors,final_results:e.GlobalReducer.final_results}}),(function(e){return{actions:Object(f.a)(Object(T.a)({},r),e)}}))(Xe),et=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement(A.d,null,n.a.createElement(A.b,{path:"/",exact:!0,render:function(){return n.a.createElement(me,null)}}),n.a.createElement(A.b,{path:"/urls/",exact:!0,render:function(){return n.a.createElement(je,null)}}),n.a.createElement(A.b,{path:"/progress/",exact:!0,render:function(){return n.a.createElement(Se,null)}}),n.a.createElement(A.b,{path:"/partial-results/",exact:!0,render:function(){return n.a.createElement(Be,null)}}),n.a.createElement(A.b,{path:"/post-process/",exact:!0,render:function(){return n.a.createElement(Je,null)}}),n.a.createElement(A.b,{path:"/final-results/",exact:!0,render:function(){return n.a.createElement(Qe,null)}}))}}]),t}(s.Component),tt=(a(349),{typography:{fontFamily:["Karla"].join(",")},palette:{primary:{main:"#361FFB",light:"#361FFB",dark:"#361FFB",contrastText:"#FFFFFF"},secondary:{main:"#e5e5e5",light:"#e5e5e5",dark:"#e5e5e5",contrastText:"#000000"},primary1Color:"#361FFB",primary2Color:"#361FFB",primary3Color:"#361FFB",accent1Color:"#361FFB",accent2Color:"#361FFB",accent3Color:"#361FFB",textColor:"#101010"},appBar:{height:50},datePicker:{color:"#361FFB",textColor:"#101010",calendarTextColor:"#101010",selectColor:"#361FFB",selectTextColor:"#101010",calendarYearBackgroundColor:"#ffffff",headerColor:"#361FFB"},raisedButton:{textColor:"#000000",primaryTextColor:"#000000"}}),at=Object(m.a)(tt),rt=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(p.a)(t).call(this,e))).state={open_back_warning_dialog:!1},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return n.a.createElement(_.a,null,n.a.createElement(h.a,{theme:at},n.a.createElement(b,null),n.a.createElement("div",{className:"main-content"},n.a.createElement(et,null)),n.a.createElement(g,null)))}}]),t}(s.Component);window.addEventListener("beforeunload",(function(e){e.preventDefault(),e.returnValue=""}));var st=rt;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var nt=a(181);c.a.render(n.a.createElement(q.a,{store:C},n.a.createElement(nt.a,{loading:null,persistor:x},n.a.createElement(st,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[210,1,2]]]);
//# sourceMappingURL=main.320f007d.chunk.js.map