{"version":3,"sources":["views/Header.js","views/Footer.js","reducers/GlobalReducer.js","reducers/index.js","store.js","constants.js","actions/GlobalActions.js","views/Home.js","views/Urls.js","views/Progress.js","views/PartialResults.js","views/PostProcess.js","views/FinalResults.js","routes/Routes.js","App.js","serviceWorker.js","index.js"],"names":["Header","className","React","Component","Footer","initial_state","full_list_urls","crawl_urls","crawl_selectors","partial_results","final_results","scraper_settings","use_proxy","GenericReducer","state","action","new_state","Object","assign","type","RootReducer","combineReducers","GlobalReducer","persistConfig","key","storage","PersistedRootReducer","persistReducer","store","createStore","store_persistor","persistStore","tag_options","title","tag_id","color","set_full_list_urls","set_scraper_settings","set_crawl_urls","set_crawl_selectors","set_partial_results","set_final_results","json_parse_booleans","value","validate_css_selector","selector","document","querySelector","Selector","props","open_tags_dialog","open_attributes_dialog","is_selector_valid","Fragment","style","this","backgroundColor","Input","label","fullWidth","disableUnderline","placeholder","defaultValue","config","css_selector","onChange","event","setState","target","edit_selector","selector_id","tag","marginLeft","attr","onClick","remove_selector","Divider","Dialog","onClose","open","aria-labelledby","DialogTitle","id","List","ListItem","button","add_tag","uniqid","ListItemText","primary","constants","map","add_attribute","Home","add_selector_field","selectors","urls","snackbar_open","snackbar_message","redirect","new_selector_set_name","display_save_dialog","display_load_dialog","is_selector_set_loading","available_selector_sets","add_selector","bind","next","save","delete","load","load_selectors","new_selectors","new_id","regex","actions","attribute","full_list","i","keys","length","current_selector_id","$","ajax","context","url","scraper_base_url","data","success","console","log","selector_sets","error","complete","XHR","status","timeout","selector_set","selector_set_dict","JSON","parse","select_set_hash_id","to","Paper","Button","variant","marginRight","speed","contentClassName","horizontal","smoothScrolling","onKeyDown","e","aria-describedby","DialogContent","DialogContentText","TextField","marginTop","marginBottom","DialogActions","CircularProgress","selectors_json","set_name","ListItemAvatar","hash_id","Snackbar","message","autoHideDuration","connect","dispatch","bindActionCreators","global_action_creators","url_dict_to_string","url_dict","urls_string","url_ids","url_list_changed","run","use_proxy_changed","new_urls","split","url_id","page_source","response_code","obj","n","current_url_id","undefined","validate","website","trim","splice","sort","slice","reduce","memo","current","is_checked","update","$set","data-tip","margin","multiline","Checkbox","checked","Progress","in_queue_counter","initial_queue_size","matches","crawl","crawl_next","count_in_queue","update_queue","crawl_finished","current_url","selector_ids","settings","counter","LinearProgress","get_data_from_tag","structuredText","result","getAttribute","generate_csv_from_matches","csv_export_array","selector_titles","j","push","header","current_row","text","replace","stringify","PosedCell","posed","div","pressable","init","scale","press","PartialResults","soup","tags","querySelectorAll","outerHTML","k","unitary_tag","data_type","html","get_content","open_dialog","dialog_json","dialog_url","use_result_as_urls","createElement","setAttribute","base_url","protocol","hostname","port","regex_pattern","RegExp","urls_to_crawl","scraped_url","test","new_url_id","separator","enclosingCharacter","filename","Table","collapsing","celled","Row","HeaderCell","Body","Cell","toString","collapsed","src","NewMatch","match","parent","remove_match","popover_timer","window","setTimeout","PostProcessPopovoer","is_open","close_timeout","current_selection","popover_close","popover_open","selection","getSelection","clearTimeout","children","selectionRef","ref_element","isOpen","onTextSelect","onTextUnselect","prepare_final_resuts","post_processed","all_tags","match_id","results","current_tag","post_processed_tags","post_procced_tag","PostProcess","ref_text","createRef","ref_html","to_post_process_array","prepare_post_process_array","current_match_index","current_tag_type","render_divider","add_match","clear_matches","finish_post_process","previous","new_to_post_process_array","onKeysPressed","href","rel","verticalContainerStyle","width","contentEditable","ref","tag_titles","random_url_id","FinalResults","tag_dict","tag_array","create_tag_dict","csv_data","Routes","path","exact","render","material_ui_theme","typography","fontFamily","join","palette","main","light","dark","contrastText","secondary","primary1Color","primary2Color","primary3Color","accent1Color","accent2Color","accent3Color","textColor","appBar","height","datePicker","calendarTextColor","selectColor","selectTextColor","calendarYearBackgroundColor","headerColor","raisedButton","primaryTextColor","theme","createMuiTheme","App","open_back_warning_dialog","addEventListener","preventDefault","returnValue","Boolean","location","ReactDOM","loading","persistor","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.a7726f36.chunk.js","sourcesContent":["import React from 'react';\n\n// CSS Imports\nimport './styles/Header.css';\n\nexport default class Header extends React.Component {\n\t// constructor(props) {\n\t// \tsuper(props);\n\t// }\n\n\trender() {\n\t\treturn (\n\t\t\t<div className=\"header\"></div>\n\t\t);\n\t}\n}\n","import React from 'react';\n\nexport default class Footer extends React.Component {\n\t// constructor(props) {\n\t// \tsuper(props);\n\t// }\n\n\trender() {\n\t\treturn (\n\t\t\t<div></div>\n\t\t);\n\t}\n}\n","const initial_state = {\n\tfull_list_urls: [],\n\tcrawl_urls: false,\n\tcrawl_selectors: false,\n\tpartial_results: false,\n\tfinal_results: false,\n\tscraper_settings: {\n\t\tuse_proxy: true\n\t}\n}\n\nfunction GenericReducer(state = initial_state, action) {\n\tlet new_state = Object.assign({}, state);\n\n\tswitch (action.type) {\n\t\tcase 'SET_FULL_LIST_URLS':\n\t\t\tnew_state.full_list_urls = action.full_list_urls;\n\t\t\treturn new_state\n\n\t\tcase 'SET_SCRAPER_SETTINGS':\n\t\t\tnew_state.scraper_settings = action.scraper_settings;\n\t\t\treturn new_state\n\n\t\tcase 'SET_CRAWL_URLS':\n\t\t\tnew_state.crawl_urls = action.crawl_urls;\n\t\t\treturn new_state\n\n\t\tcase 'SET_CRAWL_SELECTORS':\n\t\t\tnew_state.crawl_selectors = action.crawl_selectors;\n\t\t\treturn new_state\n\n\t\tcase 'SET_PARTIAL_RESULTS':\n\t\t\tnew_state.partial_results = action.partial_results;\n\t\t\treturn new_state\n\n\t\tcase 'SET_FINAL_RESULTS':\n\t\t\tnew_state.final_results = action.final_results;\n\t\t\treturn new_state\n\n\t\tdefault:\n\t\t\treturn state\n\t}\n\n}\n\nexport default GenericReducer","import { combineReducers } from 'redux'\n\nimport GlobalReducer from './GlobalReducer.js'\n\nconst RootReducer = combineReducers({\n\tGlobalReducer\n\t// ThatReducer,\n\t// ThatReducer,\n})\n\nexport default RootReducer","import { createStore } from 'redux'\nimport { persistStore, persistReducer } from 'redux-persist'\nimport storage from 'redux-persist/lib/storage'\n\n// Base reducer\nimport RootReducer from './reducers/index.js'\n\nconst persistConfig = {\n\tkey: 'root',\n\tstorage,\n}\n\nconst PersistedRootReducer = persistReducer(persistConfig, RootReducer)\n\nconst store = createStore(PersistedRootReducer)\nconst store_persistor = persistStore(store)\n\nexport { store, store_persistor }","// Debug options ----------------------------------------------------------------------------------------------------------------\nexport const debug = process.env.NODE_ENV === 'development'\nexport const purge_store_persist_on_reload = process.env.NODE_ENV === 'development' ? false : false\n\n// API endpoints ----------------------------------------------------------------------------------------------------------------\nexport const scraper_base_url = process.env.NODE_ENV === 'development' ? 'http://127.0.0.1:5000' : 'http://13.59.2.237:5000';\nexport const scraper_endpoint = scraper_base_url + '/scrape/';\nexport const save_selector_sets = scraper_base_url + '/save-selector-set/';\nexport const load_selector_sets = scraper_base_url + '/selector-sets/';\nexport const delete_selector_set = scraper_base_url + '/delete-selector-set/';\n\n// Default Tags\nexport const tag_options = [\n\t// Artist Tags\n\t{\n\t\ttitle: 'Artist Name',\n\t\ttype: 'artist',\n\t\ttag_id: 'b4hkvqk7mc',\n\t\tcolor: '#4811e3'\n\t},\n\t{\n\t\ttitle: 'Artist Birth Year',\n\t\ttype: 'artist',\n\t\ttag_id: 'ukvfzw8rep',\n\t\tcolor: '#14a998'\n\t},\n\t{\n\t\ttitle: 'Artist Death Year',\n\t\ttype: 'artist',\n\t\ttag_id: 'anptku77fe',\n\t\tcolor: '#cf04d9'\n\t},\n\t{\n\t\ttitle: 'Artist Century',\n\t\ttype: 'artist',\n\t\ttag_id: 'dxhp4dqaa4',\n\t\tcolor: '#95787d'\n\t},\n\t{\n\t\ttitle: 'Artist Birth Place',\n\t\ttype: 'artist',\n\t\ttag_id: 'rqvtase2mw',\n\t\tcolor: '#dc6843'\n\t},\n\t{\n\t\ttitle: 'Artist Description',\n\t\ttype: 'artist',\n\t\ttag_id: 'hzwxtyjamc',\n\t\tcolor: '#442734'\n\t},\n\t{\n\t\ttitle: 'Artist Biography',\n\t\ttype: 'artist',\n\t\ttag_id: 'ppcza3wpmr',\n\t\tcolor: '#c700ab'\n\t},\n\t\t{\n\t\ttitle: 'Artist Source ID',\n\t\ttype: 'artist',\n\t\ttag_id: '5uxd2y4qad',\n\t\tcolor: '#1878df'\n\t},\n\t{\n\t\ttitle: 'Artist Source URL',\n\t\ttype: 'artist',\n\t\ttag_id: 'frvy5zxjyk',\n\t\tcolor: '#8506c7'\n\t},\n\n\t// Object Tags\n\t{\n\t\ttitle: 'Object Name',\n\t\ttype: 'object',\n\t\ttag_id: 'qghneam4vw',\n\t\tcolor: '#8d0710'\n\t},\n\t{\n\t\ttitle: 'Object Image URL',\n\t\ttype: 'object',\n\t\ttag_id: '7sebgn9cdz',\n\t\tcolor: '#e17c2c'\n\t},\n\t{\n\t\ttitle: 'Object Floor Estimation',\n\t\ttype: 'object',\n\t\ttag_id: 'gup7bwnypd',\n\t\tcolor: '#b87f44'\n\t},\n\t{\n\t\ttitle: 'Object Top Estimation',\n\t\ttype: 'object',\n\t\ttag_id: 'zw7vvtnzb8',\n\t\tcolor: '#acb59d'\n\t},\n\t{\n\t\ttitle: 'Object Hammer Price',\n\t\ttype: 'object',\n\t\ttag_id: 'xnjcrwndcu',\n\t\tcolor: '#c10081'\n\t},\n\t{\n\t\ttitle: 'Object Currency',\n\t\ttype: 'object',\n\t\ttag_id: 'tnjcrwnpwk',\n\t\tcolor: '#d12031'\n\t},\n\t{\n\t\ttitle: 'Object Medium',\n\t\ttype: 'object',\n\t\ttag_id: 'bllxpawhkq',\n\t\tcolor: '#8faf11'\n\t},\n\t{\n\t\ttitle: 'Object Size',\n\t\ttype: 'object',\n\t\ttag_id: 'byzsma4rd6',\n\t\tcolor: '#d7c248'\n\t},\n\t{\n\t\ttitle: 'Object Category',\n\t\ttype: 'object',\n\t\ttag_id: '9ahkujyhff',\n\t\tcolor: '#0760ad'\n\t},\n\t{\n\t\ttitle: 'Object Description',\n\t\ttype: 'object',\n\t\ttag_id: 'wjapmaqcmz',\n\t\tcolor: '#6b72dd'\n\t},\n\t{\n\t\ttitle: 'Object Extra Info',\n\t\ttype: 'object',\n\t\ttag_id: 'widhku9p2l',\n\t\tcolor: '#fe5012'\n\t},\n\t{\n\t\ttitle: 'Object Lot Number',\n\t\ttype: 'object',\n\t\ttag_id: 'ltlxihttlf',\n\t\tcolor: '#013ab0'\n\t},\n\t{\n\t\ttitle: 'Object Year of Creation',\n\t\ttype: 'object',\n\t\ttag_id: 'ghqcdd5hho',\n\t\tcolor: '#a871de'\n\t},\n\t{\n\t\ttitle: 'Object Identification',\n\t\ttype: 'object',\n\t\ttag_id: 'zol6lprlzd',\n\t\tcolor: '#ba35fe'\n\t},\n\t{\n\t\ttitle: 'Object Provenance',\n\t\ttype: 'object',\n\t\ttag_id: 'eseceqwdbt',\n\t\tcolor: '#328ea3'\n\t},\n\t{\n\t\ttitle: 'Object Not Sold',\n\t\ttype: 'object',\n\t\ttag_id: 'yafpgxc4yv',\n\t\tcolor: '#1789ad'\n\t},\n\t\t{\n\t\ttitle: 'Object Source ID',\n\t\ttype: 'object',\n\t\ttag_id: 'e3ssleqyge',\n\t\tcolor: '#fef7aa'\n\t},\n\t{\n\t\ttitle: 'Object Source URL',\n\t\ttype: 'object',\n\t\ttag_id: 'jvvvwwqwkj',\n\t\tcolor: '#3138cd'\n\t},\n\t{\n\t\ttitle: 'Object Source Name',\n\t\ttype: 'object',\n\t\ttag_id: 'bezgjdwvmt',\n\t\tcolor: '#06d650'\n\t},\n\n\t// Auction Tags\n\t{\n\t\ttitle: 'Auction Name',\n\t\ttype: 'auction',\n\t\ttag_id: 'ebsfukecgm',\n\t\tcolor: '#39b386'\n\t},\n\t{\n\t\ttitle: 'Auction Start Date',\n\t\ttype: 'auction',\n\t\ttag_id: 'lsfhpccpb2',\n\t\tcolor: '#280439'\n\t},\n\t{\n\t\ttitle: 'Auction End Date',\n\t\ttype: 'auction',\n\t\ttag_id: 'fwyrbqpg5x',\n\t\tcolor: '#7bcfff'\n\t},\n\t{\n\t\ttitle: 'Auction Image URL',\n\t\ttype: 'auction',\n\t\ttag_id: 'cjzjtwgg7e',\n\t\tcolor: '#52c40e'\n\t},\n\t{\n\t\ttitle: 'Auction City',\n\t\ttype: 'auction',\n\t\ttag_id: 'fbqffkvcsm',\n\t\tcolor: '#33f346'\n\t},\n\t{\n\t\ttitle: 'Auction Source ID',\n\t\ttype: 'auction',\n\t\ttag_id: '9zfpse5tbd',\n\t\tcolor: '#e8f9e2'\n\t},\n\t{\n\t\ttitle: 'Auction Source URL',\n\t\ttype: 'auction',\n\t\ttag_id: 'hx6y32mmt8',\n\t\tcolor: '#860073'\n\t},\n\t{\n\t\ttitle: 'Auction Source Name',\n\t\ttype: 'auction',\n\t\ttag_id: 'fkjshhqhqb',\n\t\tcolor: '#478913'\n\t},\n\n\t// Auction House Tags\n\t{\n\t\ttitle: 'Auction House Name',\n\t\ttype: 'auction_house',\n\t\ttag_id: 'eguarqp59r',\n\t\tcolor: '#167dd1'\n\t},\n\t{\n\t\ttitle: 'Auction House Description',\n\t\ttype: 'auction_house',\n\t\ttag_id: 'bddndnm4dx',\n\t\tcolor: '#162a8b'\n\t},\n\t{\n\t\ttitle: 'Auction House Website',\n\t\ttype: 'auction_house',\n\t\ttag_id: '7zhbbdymd7',\n\t\tcolor: '#5f1579'\n\t},\n\t{\n\t\ttitle: 'Auction House Phone',\n\t\ttype: 'auction_house',\n\t\ttag_id: 's9cfw7sjua',\n\t\tcolor: '#ca264f'\n\t},\n\t{\n\t\ttitle: 'Auction House Address',\n\t\ttype: 'auction_house',\n\t\ttag_id: 'hhcd2dadsp',\n\t\tcolor: '#819c50'\n\t},\n\t{\n\t\ttitle: 'Auction House Source ID',\n\t\ttype: 'auction_house',\n\t\ttag_id: 'wvpepsw2xc',\n\t\tcolor: '#92acb1'\n\t},\n\t{\n\t\ttitle: 'Auction House Source URL',\n\t\ttype: 'auction_house',\n\t\ttag_id: '47qbbkug2a',\n\t\tcolor: '#1dd128'\n\t},\n\t{\n\t\ttitle: 'Auction House Source Name',\n\t\ttype: 'auction_house',\n\t\ttag_id: 'bkl5qunxls',\n\t\tcolor: '#906ec5'\n\t},\n]","export function set_full_list_urls(full_list_urls){\n\tvar action_to_return = {\n\t\ttype: 'SET_FULL_LIST_URLS',\n\t\tfull_list_urls: full_list_urls\n\t};\n\n\treturn action_to_return;\n}\n\nexport function set_scraper_settings(scraper_settings){\n\tvar action_to_return = {\n\t\ttype: 'SET_SCRAPER_SETTINGS',\n\t\tscraper_settings: scraper_settings\n\t};\n\n\treturn action_to_return;\n}\n\nexport function set_crawl_urls(crawl_urls){\n\tvar action_to_return = {\n\t\ttype: 'SET_CRAWL_URLS',\n\t\tcrawl_urls: crawl_urls\n\t};\n\n\treturn action_to_return;\n}\n\nexport function set_crawl_selectors(crawl_selectors){\n\tvar action_to_return = {\n\t\ttype: 'SET_CRAWL_SELECTORS',\n\t\tcrawl_selectors: crawl_selectors\n\t};\n\n\treturn action_to_return;\n}\n\n\nexport function set_partial_results(partial_results){\n\tvar action_to_return = {\n\t\ttype: 'SET_PARTIAL_RESULTS',\n\t\tpartial_results: partial_results\n\t};\n\n\treturn action_to_return;\n}\n\nexport function set_final_results(final_results){\n\tvar action_to_return = {\n\t\ttype: 'SET_FINAL_RESULTS',\n\t\tfinal_results: final_results\n\t};\n\n\treturn action_to_return;\n}","import React from 'react';\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { Redirect } from 'react-router-dom';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport Input from '@material-ui/core/Input';\nimport Divider from '@material-ui/core/Divider';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport List from '@material-ui/core/List';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport TextField from '@material-ui/core/TextField';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport uniqid from 'uniqid';\nimport ReactTooltip from 'react-tooltip'\nimport ScrollArea from 'react-scrollbar';\nimport $ from \"jquery\";\n\n// Actions\nimport * as global_action_creators from '../actions/GlobalActions.js';\n\n// CSS Imports\nimport './styles/Home.css';\n\n// Constants import\nimport * as constants from '../constants.js'\n\nfunction json_parse_booleans(key, value){\n\tif (value === 'false') {\n\t\treturn false\n\t}\n\treturn value\n}\n\nfunction validate_css_selector(selector){\n\ttry {\n\t\tdocument.querySelector(selector);\n\t\treturn true;\n\t}\n\tcatch {\n\n\t}\n\treturn false;\n}\n\nclass Selector extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\topen_tags_dialog: false,\n\t\t\topen_attributes_dialog: false,\n\t\t\tis_selector_valid: true,\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<ReactTooltip />\n\t\t\t\t<div className=\"home-selector-container\" style={this.state.is_selector_valid ? {} : {backgroundColor: '#fd676417'}}>\n\t\t\t\t\t<div className=\"home-selector-input-container\">\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tlabel=\"Dense multiline\"\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\tdisableUnderline={true}\n\t\t\t\t\t\t\tplaceholder=\"My Awesome CSS selector\"\n\t\t\t\t\t\t\tdefaultValue={this.props.config.css_selector}\n\t\t\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\t\t\tthis.setState({is_selector_valid: validate_css_selector(event.target.value)})\n\t\t\t\t\t\t\t\tthis.props.edit_selector(this.props.config.selector_id, event.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t{this.props.config.tag &&\n\t\t\t\t\t\t<span style={{backgroundColor: this.props.config.tag.color}} className=\"home-tag-indicator\">{this.props.config.tag.title}</span>\n\t\t\t\t\t}\n\t\t\t\t\t{!this.props.config.tag &&\n\t\t\t\t\t\t<span style={{backgroundColor: '#fd6764'}} className=\"home-tag-indicator\">Post Process</span>\n\t\t\t\t\t}\n\n\t\t\t\t\t<span style={{backgroundColor: '#361ffb', marginLeft: 10, color: 'white'}} className=\"home-tag-indicator\">{this.props.config.attr}</span>\n\t\t\t\t\t<i className=\"home-selector-icon material-icons\" onClick={() => this.setState({open_tags_dialog: true})}>label</i>\n\t\t\t\t\t<i className=\"home-selector-icon material-icons\" onClick={() => this.setState({open_attributes_dialog: true})}>code</i>\n\t\t\t\t\t<i className=\"home-selector-icon material-icons\" onClick={() => this.props.remove_selector(this.props.config.selector_id)}>close</i>\n\t\t\t\t</div>\n\t\t\t\t<Divider />\n\n\t\t\t\t<Dialog\n\t\t\t\t\tonClose={() => this.setState({open_tags_dialog: false})}\n\t\t\t\t\topen={this.state.open_tags_dialog}\n\t\t\t\t\taria-labelledby=\"simple-dialog-title\"\n\t\t\t\t>\n\t\t\t\t\t<DialogTitle id=\"simple-dialog-title\">Select a tag</DialogTitle>\n\t\t\t\t\t<List>\n\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\tstyle={{backgroundColor: '#eaeaea'}}\n\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.setState({open_tags_dialog: false});\n\t\t\t\t\t\t\t\tthis.props.add_tag(this.props.config.selector_id, false);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tkey={uniqid()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ListItemText primary=\"Post process\" />\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t{constants.tag_options.map((tag) => \n\t\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tthis.setState({open_tags_dialog: false});\n\t\t\t\t\t\t\t\t\tthis.props.add_tag(this.props.config.selector_id, tag);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tkey={uniqid()}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<ListItemText primary={tag.title} />\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</List>\n\t\t\t\t</Dialog>\n\n\t\t\t\t<Dialog\n\t\t\t\t\tonClose={() => this.setState({open_attributes_dialog: false})}\n\t\t\t\t\topen={this.state.open_attributes_dialog}\n\t\t\t\t\taria-labelledby=\"simple-dialog-title\"\n\t\t\t\t>\n\t\t\t\t\t<DialogTitle id=\"simple-dialog-title\">Select an Attribute</DialogTitle>\n\t\t\t\t\t<List>\n\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.setState({open_attributes_dialog: false});\n\t\t\t\t\t\t\t\tthis.props.add_attribute(this.props.config.selector_id, 'innerText');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tkey={uniqid()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ListItemText primary={'innerText'} />\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.setState({open_attributes_dialog: false});\n\t\t\t\t\t\t\t\tthis.props.add_attribute(this.props.config.selector_id, 'href');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tkey={uniqid()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ListItemText primary={'href'} />\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.setState({open_attributes_dialog: false});\n\t\t\t\t\t\t\t\tthis.props.add_attribute(this.props.config.selector_id, 'src');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tkey={uniqid()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ListItemText primary={'src'} />\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.setState({open_attributes_dialog: false});\n\t\t\t\t\t\t\t\tthis.props.add_attribute(this.props.config.selector_id, 'srcset');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tkey={uniqid()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ListItemText primary={'srcset'} />\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.setState({open_attributes_dialog: false});\n\t\t\t\t\t\t\t\tthis.props.add_attribute(this.props.config.selector_id, 'class');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tkey={uniqid()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ListItemText primary={'class'} />\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t<ListItem\n\t\t\t\t\t\t\tbutton\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.setState({open_attributes_dialog: false});\n\t\t\t\t\t\t\t\tthis.props.add_attribute(this.props.config.selector_id, 'id');\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tkey={uniqid()}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<ListItemText primary={'id'} />\n\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t</List>\n\t\t\t\t</Dialog>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\n\nclass Home extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tadd_selector_field: '',\n\t\t\tselectors: this.props.crawl_selectors ? this.props.crawl_selectors : {},\n\t\t\turls: this.props.full_list_urls,\n\t\t\tsnackbar_open: false,\n\t\t\tsnackbar_message: '',\n\t\t\tredirect: false,\n\t\t\tnew_selector_set_name: '',\n\t\t\tdisplay_save_dialog: false,\n\t\t\tdisplay_load_dialog: false,\n\t\t\tis_selector_set_loading: true,\n\t\t\tavailable_selector_sets: []\n\t\t}\n\n\t\tthis.add_selector = this.add_selector.bind(this);\n\t\tthis.remove_selector = this.remove_selector.bind(this);\n\t\tthis.add_tag = this.add_tag.bind(this);\n\t\tthis.add_attribute = this.add_attribute.bind(this);\n\t\tthis.edit_selector = this.edit_selector.bind(this);\n\t\tthis.next = this.next.bind(this);\n\t\tthis.save = this.save.bind(this);\n\t\tthis.delete = this.delete.bind(this);\n\t\tthis.load = this.load.bind(this);\n\t\tthis.load_selectors = this.load_selectors.bind(this);\n\t}\n\n\t// Add a new empty CSS selector\n\tadd_selector(){\n\t\tlet new_selectors = Object.assign({}, this.state.selectors);\n\n\t\tlet new_id = uniqid();\n\t\tnew_selectors[new_id] = {\n\t\t\tselector_id: new_id,\n\t\t\tcss_selector: this.state.add_selector_field,\n\t\t\ttag: false,\n\t\t\tregex: '',\n\t\t\tattr: 'innerText',\n\t\t\turls: [],\n\t\t}\n\t\tthis.setState({selectors: new_selectors})\n\t\tthis.setState({add_selector_field: ''})\n\t\tthis.props.actions.set_crawl_selectors(new_selectors)\n\t}\n\n\tremove_selector(selector_id){\n\t\tlet new_selectors = Object.assign({}, this.state.selectors);\n\t\tdelete new_selectors[selector_id]\n\t\tthis.setState({selectors: new_selectors})\n\t\tthis.props.actions.set_crawl_selectors(new_selectors)\n\t}\n\n\tadd_tag(selector_id, tag){\n\t\tlet new_selectors = Object.assign({}, this.state.selectors);\n\t\tnew_selectors[selector_id]['tag'] = tag\n\t\tthis.setState({selectors: new_selectors})\n\t\tthis.props.actions.set_crawl_selectors(new_selectors)\n\t}\n\n\tadd_attribute(selector_id, attribute){\n\t\tlet new_selectors = Object.assign({}, this.state.selectors);\n\t\tnew_selectors[selector_id]['attr'] = attribute\n\t\tthis.setState({selectors: new_selectors})\n\t\tthis.props.actions.set_crawl_selectors(new_selectors)\n\t}\n\n\tedit_selector(selector_id, css_selector){\n\t\tlet new_selectors = Object.assign({}, this.state.selectors);\n\t\tnew_selectors[selector_id]['css_selector'] = css_selector;\n\t\t// eslint-disable-next-line\n\t\tthis.state.selectors = new_selectors;\n\t}\n\n\tnext(full_list){\n\t\tlet selectors = Object.assign({}, this.state.selectors);\n\n\t\t// Delete css selectors with invalid format\n\t\tfor (var i = Object.keys(selectors).length - 1; i >= 0; i--) {\n\t\t\tlet current_selector_id = Object.keys(selectors)[i];\n\t\t\tif (!validate_css_selector(selectors[current_selector_id].css_selector)) {\n\t\t\t\tdelete selectors[current_selector_id]\n\t\t\t}\n\t\t}\n\n\t\tif (Object.keys(selectors).length === 0) {\n\t\t\tthis.setState({snackbar_message: 'No proper CSS selector found'})\n\t\t\tthis.setState({snackbar_open: true})\n\t\t\treturn\n\t\t}\n\n\t\tthis.props.actions.set_crawl_selectors(selectors)\n\t\t\n\t\tthis.setState({redirect: \"/urls/\"})\n\t}\n\n\tload_selectors(){\n\t\tthis.setState({is_selector_set_loading: true});\n\t\tthis.setState({display_load_dialog: true});\n\t\t$.ajax({\n\t\t\tcontext: this,\n\t\t\turl: constants.load_selector_sets,\n\t\t\ttype: 'get',\n\t\t\tdata: {},\n\t\t\tsuccess: function(data) {\n\t\t\t\tconsole.log(data)\n\t\t\t\tthis.setState({available_selector_sets: data.selector_sets});\n\t\t\t\tthis.setState({is_selector_set_loading: false});\n\t\t\t},\n\t\t\terror: function(data) {},\n\t\t\tcomplete: function(XHR, status){},\n\t\t\ttimeout: 120000\n\t\t});\n\t}\n\n\tload(selector_set){\n\t\tvar selector_set_dict = JSON.parse(selector_set, json_parse_booleans);\n\t\tthis.setState({ selectors: selector_set_dict });\n\t\tthis.setState({display_load_dialog: false});\n\t\tconsole.log(selector_set_dict)\n\t}\n\n\tsave(){\t\n\t\tif (this.state.new_selector_set_name.length === 0) {\n\t\t\tthis.setState({snackbar_message: 'Please give your selector set a proper name'})\n\t\t\tthis.setState({snackbar_open: true})\n\t\t\treturn \n\t\t}\n\n\t\tthis.setState({display_save_dialog: false})\n\t\t$.ajax({\n\t\t\tcontext: this,\n\t\t\turl: constants.save_selector_sets,\n\t\t\ttype: 'get',\n\t\t\tdata: {\n\t\t\t\t'selector_set': this.state.selectors,\n\t\t\t\t'set_name': this.state.new_selector_set_name\n\t\t\t},\n\t\t\tsuccess: function(data) {\n\t\t\t\tif (data.status === 'success') {\n\t\t\t\t\tthis.setState({snackbar_message: 'Saved!'})\n\t\t\t\t\tthis.setState({snackbar_open: true})\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\tthis.setState({snackbar_message: 'Sorry, I got an error...'})\n\t\t\t\t\tthis.setState({snackbar_open: true})\n\t\t\t\t}\n\t\t\t},\n\t\t\terror: function(data) {\n\t\t\t\tthis.setState({snackbar_message: 'Sorry, I got an error...'})\n\t\t\t\tthis.setState({snackbar_open: true})\n\t\t\t},\n\t\t\tcomplete: function(XHR, status){},\n\t\t\ttimeout: 120000\n\t\t});\n\t}\n\n\tdelete(select_set_hash_id){\n\t\tthis.setState({display_load_dialog: false})\n\t\t$.ajax({\n\t\t\tcontext: this,\n\t\t\turl: constants.delete_selector_set,\n\t\t\ttype: 'get',\n\t\t\tdata: {\n\t\t\t\t'hash_id': select_set_hash_id,\n\t\t\t},\n\t\t\tsuccess: function(data) {},\n\t\t\terror: function(data) {},\n\t\t\tcomplete: function(XHR, status){},\n\t\t\ttimeout: 120000\n\t\t});\n\t}\n\n\trender() {\n\t\tif (this.state.redirect) {\n\t\t\treturn <Redirect to={this.state.redirect} />\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"home-main-container\">\n\t\t\t\t<ReactTooltip />\n\t\t\t\t<Paper className=\"home-section\">\n\t\t\t\t\t<div className=\"home-section-header\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div className=\"home-section-header-title\">\n\t\t\t\t\t\t\t\tSelectors\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"home-section-header-subtitle\">\n\t\t\t\t\t\t\t\tAdd your CSS selectors and their respective tags\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<Button className=\"home-run-button\" variant=\"contained\" color=\"secondary\" onClick={this.load_selectors} style={{marginRight: 10}}>LOAD</Button>\n\t\t\t\t\t\t\t<Button className=\"home-run-button\" variant=\"contained\" color=\"secondary\" onClick={() => this.setState({display_save_dialog: true})} style={{marginRight: 10}}>SAVE</Button>\n\t\t\t\t\t\t\t<Button className=\"home-run-button\" variant=\"contained\" color=\"primary\" onClick={this.next}>NEXT</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<ScrollArea\n\t\t\t\t\t\tspeed={0.8}\n\t\t\t\t\t\tclassName=\"home-section-body\"\n\t\t\t\t\t\tcontentClassName=\"content\"\n\t\t\t\t\t\thorizontal={false}\n\t\t\t\t\t\tsmoothScrolling={true}\n\t\t\t\t\t>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t\n\n\t\t\t\t\t\t\t{Object.keys(this.state.selectors).map((selector_id) => {\n\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t<Selector\n\t\t\t\t\t\t\t\t\t\tconfig={this.state.selectors[selector_id]}\n\t\t\t\t\t\t\t\t\t\tremove_selector={this.remove_selector}\n\t\t\t\t\t\t\t\t\t\tadd_tag={this.add_tag}\n\t\t\t\t\t\t\t\t\t\tadd_attribute={this.add_attribute}\n\t\t\t\t\t\t\t\t\t\tedit_selector={this.edit_selector}\n\t\t\t\t\t\t\t\t\t\tkey={uniqid()}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\n\t\t\t\t\t\t\t<div className=\"home-selector-container\">\n\t\t\t\t\t\t\t\t<div className=\"home-selector-input-container\">\n\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\tlabel=\"CSS Selector\"\n\t\t\t\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\t\t\t\tdisableUnderline={true}\n\t\t\t\t\t\t\t\t\t\tplaceholder=\"My Awesome CSS selector\"\n\t\t\t\t\t\t\t\t\t\tvalue={this.state.add_selector_field}\n\t\t\t\t\t\t\t\t\t\tonChange={(event) => this.setState({add_selector_field: event.target.value})}\n\t\t\t\t\t\t\t\t\t\tonKeyDown={(e) => {if (e.key === 'Enter') this.add_selector()}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<i className=\"home-selector-icon material-icons\" onClick={this.add_selector}>add</i>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t</React.Fragment>\n\n\t\t\t\t\t</ScrollArea>\n\t\t\t\t</Paper>\n\n\t\t\t\t<Dialog\n\t\t\t\t\topen={this.state.display_save_dialog}\n\t\t\t\t\tonClose={() => this.setState({display_save_dialog: false})}\n\t\t\t\t\taria-labelledby=\"alert-dialog-title\"\n\t\t\t\t\taria-describedby=\"alert-dialog-description\"\n\t\t\t\t>\n\t\t\t\t\t<DialogTitle id=\"alert-dialog-title\">Save Selector Set</DialogTitle>\n\t\t\t\t\t<DialogContent>\n\t\t\t\t\t\t<DialogContentText id=\"alert-dialog-description\">\n\t\t\t\t\t\t\tGive your selector set a name. It should have a name that reminds you of the website and type of page you're parsing.\n\t\t\t\t\t\t</DialogContentText>\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tstyle={{marginTop: 10, marginBottom: 10 }}\n\t\t\t\t\t\t\tfullWidth={true}\n\t\t\t\t\t\t\tid=\"outlined-basic\"\n\t\t\t\t\t\t\tlabel=\"Selecto Set Name\"\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tvalue={this.state.new_selector_set_name}\n\t\t\t\t\t\t\tonChange={(event) => this.setState({new_selector_set_name: event.target.value})}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</DialogContent>\n\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t<Button onClick={() => this.setState({display_save_dialog: false})} color=\"secondary\" variant=\"contained\">CANCEL</Button>\n\t\t\t\t\t\t<Button onClick={this.save} color=\"primary\" variant=\"contained\">SAVE</Button>\n\t\t\t\t\t</DialogActions>\n\t\t\t\t</Dialog>\n\n\t\t\t\t<Dialog onClose={() => this.setState({display_load_dialog: false})} aria-labelledby=\"simple-dialog-title\" open={this.state.display_load_dialog}>\n\t\t\t\t\t<DialogTitle id=\"simple-dialog-title\">Load Selector Set</DialogTitle>\n\t\t\t\t\t{this.state.is_selector_set_loading &&\n\t\t\t\t\t\t<div className=\"home-load-dialog-progress-container\">\n\t\t\t\t\t\t\t<CircularProgress />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t}\n\t\t\t\t\t{!this.state.is_selector_set_loading &&\n\t\t\t\t\t\t<List>\n\t\t\t\t\t\t\t{this.state.available_selector_sets.map((selector_set) => {\n\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t<ListItem className=\"home-load-dialog-item\">\n\t\t\t\t\t\t\t\t\t\t<ListItemText onClick={() => this.load(selector_set.selectors_json)} primary={selector_set.set_name} />\n\t\t\t\t\t\t\t\t\t\t<ListItemAvatar onClick={() => this.delete(selector_set.hash_id)} className=\"home-load-dialog-delete-button\">\n\t\t\t\t\t\t\t\t\t\t\t<i className=\"material-icons\">delete</i>\n\t\t\t\t\t\t\t\t\t\t</ListItemAvatar>\n\t\t\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</List>\n\t\t\t\t\t}\n\t\t\t\t</Dialog>\n\n\t\t\t\t<Snackbar message={this.state.snackbar_message} open={this.state.snackbar_open} autoHideDuration={5000} onClose={() => this.setState({snackbar_open: false})} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\n// Map Redux state to component props\nfunction mapStateToProps(state) {\n\treturn {\n\t\tcrawl_selectors: state.GlobalReducer.crawl_selectors,\n\t}\n}\n\n// Map Redux actions to component props\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tactions: bindActionCreators({...global_action_creators}, dispatch)\n\t}\n}\n\n// Connect component to the store\nexport default connect(mapStateToProps, mapDispatchToProps)(Home)\n\n\n\n\n\n\n\n\n\n","import React from 'react';\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { Redirect } from 'react-router-dom';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport TextField from '@material-ui/core/TextField';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport update from 'react-addons-update';\nimport uniqid from 'uniqid';\nimport validate from 'validate.js';\nimport ReactTooltip from 'react-tooltip'\n\n// Actions\nimport * as global_action_creators from '../actions/GlobalActions.js';\n\n// CSS Imports\nimport './styles/Urls.css';\n\n// Get the first N keys of a dict\nfunction firstN(obj, n) {\n\treturn Object.keys(obj) //get the keys out\n\t\t.sort() //this will ensure consistent ordering of what you will get back. If you want something in non-aphabetical order, you will need to supply a custom sorting function\n\t\t.slice(0, n) //get the first N\n\t\t.reduce(function(memo, current) { //generate a new object out of them\n\t\t\tmemo[current] = obj[current]\n\t\t\treturn memo;\n\t}, {})\n}\n\n\nfunction url_dict_to_string(url_dict){\n\tlet urls_string = ''\n\n\tvar url_ids = Object.keys(url_dict);\n\tfor (var i = url_ids.length - 1; i >= 0; i--) {\n\t\tlet url_id = url_ids[i]\n\n\t\turls_string = urls_string + url_dict[url_id].url + '\\n'\n\t}\n\n\treturn urls_string\n}\n\n\nclass Home extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\t// Reset the URLs status to in_queue\n\n\t\tlet urls = Object.assign({}, this.props.full_list_urls);\n\t\tlet url_ids = Object.keys(urls)\n\t\tfor (var i = url_ids.length - 1; i >= 0; i--) {\n\t\t\tlet url_id = url_ids[i]\n\t\t\turls[url_id].status = 'in_queue'\n\t\t}\n\n\t\tthis.state = {\n\t\t\tadd_selector_field: '',\n\t\t\turls: urls,\n\t\t\tscraper_settings: this.props.scraper_settings,\n\t\t}\n\n\t\tthis.url_list_changed = this.url_list_changed.bind(this);\n\t\tthis.run = this.run.bind(this);\n\t\tthis.use_proxy_changed = this.use_proxy_changed.bind(this);\n\t}\n\n\turl_list_changed(event){\n\t\tlet new_urls = Object.assign({}, {});\n\n\t\tlet urls = event.target.value.split('\\n')\n\t\tlet url_id = uniqid();\n\t\tfor (var i = urls.length - 1; i >= 0; i--) {\n\t\t\turl_id = uniqid();\n\t\t\tnew_urls[url_id] = {url: urls[i], url_id: url_id, 'status': 'in_queue', page_source: false, response_code: false}\n\t\t}\n\n\t\tthis.props.actions.set_full_list_urls(new_urls)\n\n\t\t// eslint-disable-next-line\n\t\tthis.state.urls = new_urls;\n\t}\n\n\trun(full_list){\n\t\tlet urls = Object.assign({}, this.state.urls);\n\n\t\t// Delete URLs that don't have a valid format\n\t\t// eslint-disable-next-line\n\t\tfor (var i = Object.keys(urls).length - 1; i >= 0; i--) {\n\t\t\tlet current_url_id = Object.keys(urls)[i];\n\t\t\tlet url_checker = validate({website: urls[current_url_id]['url'].trim()}, {website: {url: true}});\n\t\t\tif (url_checker !== undefined) {\n\t\t\t\tdelete urls[current_url_id]\n\t\t\t}\n\t\t}\n\n\t\t// eslint-disable-next-line\n\t\tfor (var i = urls.length - 1; i >= 0; i--) {\n\t\t\tlet url_checker = validate({website: urls[i]}, {website: {url: true}});\n\t\t\tif (url_checker !== undefined) {\n\t\t\t\turls.splice(i, 1);\n\t\t\t}\n\t\t}\n\n\t\tif (Object.keys(urls).length === 0) {\n\t\t\tthis.setState({snackbar_message: 'No proper URLs found'})\n\t\t\tthis.setState({snackbar_open: true})\n\t\t\treturn\n\t\t}\n\n\t\tif (!full_list && Object.keys(urls).length > 3) {\n\t\t\turls = firstN(urls, 3)\n\t\t}\n\n\t\tthis.props.actions.set_crawl_urls(urls)\n\t\t\n\t\tthis.setState({redirect: \"/progress/\"})\n\t}\n\n\tuse_proxy_changed(event, is_checked){\n\t\tconst new_state = update(this.state, {\n\t\t\tscraper_settings: {use_proxy: {$set: is_checked}},\n\t\t});\n\t\tthis.props.actions.set_scraper_settings(new_state.scraper_settings)\n\t\tthis.setState(new_state)\n\t}\n\n\trender() {\n\t\tif (this.state.redirect) {\n\t\t\treturn <Redirect to={this.state.redirect} />\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"urls-main-container\">\n\t\t\t\t<ReactTooltip />\n\t\t\t\t<Paper className=\"urls-section\">\n\t\t\t\t\t<div className=\"urls-section-header\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div className=\"urls-section-header-title\">\n\t\t\t\t\t\t\t\tURLs to scrape\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"urls-section-header-subtitle\">\n\t\t\t\t\t\t\t\tURL list here - One per line\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t<Button className=\"urls-run-sample-button\" variant=\"contained\" color=\"secondary\" onClick={() => this.setState({redirect: \"/\"})}>BACK</Button>\n\t\t\t\t\t\t\t<Button className=\"urls-run-sample-button\" variant=\"contained\" color=\"secondary\" data-tip=\"Run a sample of 3 URLs only\" onClick={() => this.run(false)}>RUN SAMPLE</Button>\n\t\t\t\t\t\t\t<Button className=\"urls-run-button\" variant=\"contained\" color=\"primary\" onClick={() => this.run(true)}>RUN</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"urls-section-body\">\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<TextField\n\t\t\t\t\t\t\tid=\"outlined-dense-multiline\"\n\t\t\t\t\t\t\tlabel=\"URL List\"\n\t\t\t\t\t\t\tmargin=\"dense\"\n\t\t\t\t\t\t\tvariant=\"outlined\"\n\t\t\t\t\t\t\tmultiline\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\tdefaultValue={url_dict_to_string(this.state.urls)}\n\t\t\t\t\t\t\tonChange={this.url_list_changed}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</Paper>\n\n\t\t\t\t<Paper className=\"urls-section\">\n\t\t\t\t\t<div className=\"urls-section-header\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div className=\"urls-section-header-title\">\n\t\t\t\t\t\t\t\tScraper options\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"urls-section-header-subtitle\">\n\t\t\t\t\t\t\t\tThe settings to use when requesting the listed URLs.\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"urls-section-body\">\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\t\tchecked={this.state.scraper_settings.use_proxy}\n\t\t\t\t\t\t\t\tonChange={this.use_proxy_changed}\n\t\t\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<span>Use proxies on every request</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Paper>\n\n\n\t\t\t\t<Snackbar message={this.state.snackbar_message} open={this.state.snackbar_open} onClose={() => this.setState({snackbar_open: false})} />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n// Map Redux state to component props\nfunction mapStateToProps(state) {\n\treturn {\n\t\tfull_list_urls: state.GlobalReducer.full_list_urls,\n\t\tscraper_settings: state.GlobalReducer.scraper_settings,\n\t}\n}\n\n// Map Redux actions to component props\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tactions: bindActionCreators({...global_action_creators}, dispatch)\n\t}\n}\n\n// Connect component to the store\nexport default connect(mapStateToProps, mapDispatchToProps)(Home)\n\n\n\n\n\n\n\n\n\n","import React from 'react';\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { Redirect } from 'react-router-dom';\nimport $ from \"jquery\";\nimport uniqid from 'uniqid';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Paper from '@material-ui/core/Paper';\nimport Divider from '@material-ui/core/Divider';\nimport Button from '@material-ui/core/Button';\n\n// Actions\nimport * as global_action_creators from '../actions/GlobalActions.js';\n\n// CSS Imports\nimport './styles/Progress.css';\n\n// Constants import\nimport * as constants from '../constants.js'\n\nclass Progress extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\turls: this.props.crawl_urls,\n\t\t\tin_queue_counter: 0,\n\t\t\tinitial_queue_size: 0,\n\t\t\tredirect: false,\n\t\t\tmatches: {}\n\t\t}\n\n\t\tthis.crawl = this.crawl.bind(this);\n\t\tthis.crawl_next = this.crawl_next.bind(this);\n\t\tthis.count_in_queue = this.count_in_queue.bind(this);\n\t\tthis.update_queue = this.update_queue.bind(this);\n\t\tthis.crawl_finished = this.crawl_finished.bind(this);\n\n\t\tthis.state.initial_queue_size = this.count_in_queue();\n\t\tthis.crawl_next();\n\t\tthis.state.in_queue_counter = this.count_in_queue() + 1;\n\t}\n\n\tcrawl_next(){\n\t\tlet urls = Object.assign({}, this.state.urls);\n\t\tfor (var i = 0; i < Object.keys(urls).length; i++) {\n\t\t\tlet current_url_id = Object.keys(urls)[i];\n\t\t\tlet current_url = urls[current_url_id];\n\t\t\tif (current_url.status === 'in_queue') {\n\t\t\t\turls[current_url_id].status = 'scraping'\n\t\t\t\tthis.setState({urls: urls})\n\t\t\t\tthis.update_queue();\n\t\t\t\tthis.crawl(current_url)\n\t\t\t\treturn\n\t\t\t}\n\t\t}\n\n\t\tthis.crawl_finished()\n\t\treturn\n\t}\n\n\tcrawl(url){\n\t\tvar selector_ids = Object.keys(this.props.crawl_selectors);\n\n\t\t// Create an empty dict for the current URL being crawler\n\t\t// eslint-disable-next-line\n\t\tthis.state.matches[url.url_id] = {}\n\n\t\t// Now, for each one of the selector IDs, let's create an empty array with the selector id as the key.\n\t\t// They will later be replaces with the matches if we find any.\n\t\tfor (var i = selector_ids.length - 1; i >= 0; i--) {\n\t\t\tlet selector_id = selector_ids[i];\n\t\t\t// eslint-disable-next-line\n\t\t\tthis.state.matches[url.url_id][selector_id] = []\n\t\t}\n\n\t\t$.ajax({\n\t\t\tcontext: this,\n\t\t\turl: constants.scraper_endpoint,\n\t\t\ttype: 'get',\n\t\t\tdata: {\n\t\t\t\turl: url.url,\n\t\t\t\tselectors: this.props.crawl_selectors,\n\t\t\t\tsettings: this.props.scraper_settings\n\t\t\t},\n\t\t\tsuccess: function(data) {\n\t\t\t\t// eslint-disable-next-line\n\t\t\t\tthis.state.matches[url.url_id] = Object.assign(this.state.matches[url.url_id], data.matches);\n\n\t\t\t\tlet urls = Object.assign({}, this.state.urls);\n\t\t\t\turls[url.url_id].status = data.status\n\t\t\t\turls[url.url_id].page_source = data.page_source\n\t\t\t\turls[url.url_id].response_code = data.response_code\n\t\t\t\tthis.setState({urls: urls})\n\t\t\t\tthis.crawl_next();\n\t\t\t},\n\t\t\terror: function(data) {\n\t\t\t\tlet urls = Object.assign({}, this.state.urls);\n\t\t\t\turls[url.url_id].status = 'error'\n\t\t\t\tthis.setState({urls: urls})\n\t\t\t\tthis.crawl_next();\n\t\t\t},\n\t\t\tcomplete: function(XHR, status){\n\t\t\t\tthis.update_queue();\n\t\t\t},\n\t\t\ttimeout: 120000\n\t\t});\n\t}\n\n\tcount_in_queue(){\n\t\tlet counter = 0;\n\t\tfor (var i = Object.keys(this.state.urls).length - 1; i >= 0; i--) {\n\t\t\tlet current_url_id = Object.keys(this.state.urls)[i];\n\t\t\tlet current_url = this.state.urls[current_url_id];\n\t\t\tif (current_url.status === 'in_queue') {\n\t\t\t\tcounter = counter + 1\n\t\t\t}\n\t\t}\n\t\treturn counter\n\t}\n\n\tupdate_queue(){\n\t\tlet counter = this.count_in_queue();\n\t\tthis.setState({in_queue_counter: counter + 1});\n\t}\n\n\tcrawl_finished(){\n\t\tthis.props.actions.set_crawl_urls(this.state.urls)\n\t\tthis.props.actions.set_partial_results(this.state.matches);\n\t\tthis.setState({redirect: \"/partial-results/\"})\n\t}\n\n\trender() {\n\t\tif (this.state.redirect) {\n\t\t\treturn <Redirect to={this.state.redirect} />\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"progress-main-container\">\n\t\t\t\t<Paper className=\"progress-section\">\n\t\t\t\t\t<div className=\"progress-section-header\">\n\t\t\t\t\t\t<div className=\"progress-section-header-title\">Now running...</div>\n\t\t\t\t\t\t<Button className=\"home-run-button\" variant=\"contained\" color=\"secondary\" onClick={() => this.setState({redirect: \"/urls/\"}) }>CANCEL</Button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<LinearProgress className=\"progress-loading-bar\" variant=\"determinate\" value={100*((this.state.initial_queue_size - this.state.in_queue_counter)/this.state.initial_queue_size)} />\n\t\t\t\t\t<div className=\"progress-section-progress-legend\">{this.state.initial_queue_size - this.state.in_queue_counter}/{this.state.initial_queue_size} urls processed</div>\n\t\t\t\t</Paper>\n\t\t\t\t<Paper className=\"progress-section\">\n\t\t\t\t\t<div className=\"progress-section-header-title\">Crawl Results</div>\n\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t<br />\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t<div className=\"progress-section-url-container\">\n\t\t\t\t\t\t\t{Object.keys(this.state.urls).map((url_id) => {\n\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t<React.Fragment key={uniqid()}>\n\t\t\t\t\t\t\t\t\t\t<div className=\"progress-item\" key={uniqid()}>\n\t\t\t\t\t\t\t\t\t\t\t<div key={uniqid()} className=\"progress-item-url\">{this.state.urls[url_id].url}</div>\n\t\t\t\t\t\t\t\t\t\t\t<div key={uniqid()} className=\"progress-item-status\">{this.state.urls[url_id].status}</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t<Divider key={uniqid()} />\n\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</React.Fragment>\n\n\t\t\t\t</Paper>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n// Map Redux state to component props\nfunction mapStateToProps(state) {\n\treturn {\n\t\tcrawl_urls: state.GlobalReducer.crawl_urls,\n\t\tcrawl_selectors: state.GlobalReducer.crawl_selectors,\n\t\tscraper_settings: state.GlobalReducer.scraper_settings,\n\t}\n}\n\n// Map Redux actions to component props\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tactions: bindActionCreators({...global_action_creators}, dispatch)\n\t}\n}\n\n// Connect component to the store\nexport default connect(mapStateToProps, mapDispatchToProps)(Progress)\n","import React from 'react';\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { Redirect } from 'react-router-dom';\nimport { Table } from 'semantic-ui-react'\nimport uniqid from 'uniqid';\nimport { parse } from 'node-html-parser';\nimport EllipsisText from 'react-ellipsis-text';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport { CSVLink } from \"react-csv\";\nimport posed from 'react-pose';\nimport ReactJson from 'react-json-view'\n\n// Actions\nimport * as global_action_creators from '../actions/GlobalActions.js';\n\n// CSS Imports\nimport './styles/PartialResults.css';\n\nfunction get_data_from_tag(tag, attr){\n\tif (attr === 'innerText') {\n\t\treturn tag.structuredText\n\t}\n\n\tvar result = tag.getAttribute(attr);\n\tif (result == null){\n    \treturn ''\n\t}\n\n\treturn result\n\n}\n\nfunction get_content(urls, selectors){\n\tlet matches = {}\n\n\t// Now let's iterate over each url scraped\n\tfor (var i = Object.keys(urls).length - 1; i >= 0; i--) {\n\t\tlet url_id = Object.keys(urls)[i];\n\t\tlet url = urls[url_id];\n\n\t\t// Now let's create an empty entry for each one of the URLs, this entry will later be filled with the selectors results\n\t\tmatches[url_id] = {}\n\n\t\t// We should only parse URLs that were successfully scraped\n\t\tif (url.status === \"success\") {\n\n\t\t\t// Now create a soup from the raw page source code\n\t\t\tlet soup = parse(url.page_source);\n\n\t\t\t// Now let's find the elements of interest withing the soup using the user's CSS selectors\n\t\t\tfor (var j = Object.keys(selectors).length - 1; j >= 0; j--) {\n\t\t\t\tlet selector_id = Object.keys(selectors)[j];\n\t\t\t\tlet selector = selectors[selector_id];\n\n\t\t\t\t// Now get the target element from the soup\n\t\t\t\tlet tag = soup.querySelector(selector.css_selector);\n\t\t\t\tlet tags = soup.querySelectorAll(selector.css_selector);\n\n\t\t\t\t// Check if the element was found, if it is then, get the inner text,\n\t\t\t\t// otherwise just assign false to the result array\n\t\t\t\tif (tag !== null) {\n\t\t\t\t\tif (tags.length > 1) {\n\t\t\t\t\t\tlet text = {\n\t\t\t\t\t\t\t'data_type': 'json',\n\t\t\t\t\t\t\tmatches: []\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet outerHTML = {\n\t\t\t\t\t\t\t'data_type': 'json',\n\t\t\t\t\t\t\tmatches: []\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfor (var k = tags.length - 1; k >= 0; k--) {\n\t\t\t\t\t\t\tlet unitary_tag = tags[k];\n\t\t\t\t\t\t\ttext.matches.push(get_data_from_tag(unitary_tag, selector.attr))\n\t\t\t\t\t\t\touterHTML.matches.push(unitary_tag.outerHTML)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tmatches[url_id][selector_id] = {data_type: 'json', text: JSON.stringify(text), html: JSON.stringify(outerHTML)}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tmatches[url_id][selector_id] = {data_type: 'single', text: get_data_from_tag(tag, selector.attr), html: tag.outerHTML}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tmatches[url_id][selector_id] = false\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\t// If the page surce wasn't scraped successfuly, then simply assign false to every selector\n\t\t\t// eslint-disable-next-line\n\t\t\tfor (var j = Object.keys(selectors).length - 1; j >= 0; j--) {\n\t\t\t\tlet selector_id = Object.keys(selectors)[j];\n\t\t\t\tmatches[url_id][selector_id] = false\n\t\t\t}\n\t\t}\n\n\t}\n\n\treturn matches\n}\n\nfunction generate_csv_from_matches(urls, selectors, matches){\n\tlet csv_export_array = [];\n\n\tlet selector_titles = [];\n\tfor (var j = 0; j < Object.keys(selectors).length; j++) {\n\t\tlet selector_id = Object.keys(selectors)[j];\n\t\tlet selector = selectors[selector_id];\n\t\tselector_titles.push(selector.tag.title ? selector.tag.title : 'Post Process')\n\t}\t\n\n\tlet header = ['URL', 'Status', 'Response Code', ...selector_titles];\n\tcsv_export_array.push(header)\n\n\tfor (var i = 0; i < Object.keys(urls).length; i++) {\n\t\tlet current_row = []\n\t\tlet url_id = Object.keys(urls)[i];\n\t\tlet url = urls[url_id];\n\t\tcurrent_row.push(url.url)\n\t\tcurrent_row.push(url.status ? url.status : '')\n\t\tcurrent_row.push(url.response_code)\n\n\t\t// eslint-disable-next-line\n\t\tfor (var j = 0; j < Object.keys(selectors).length; j++) {\n\t\t\tlet selector_id = Object.keys(selectors)[j];\n\n\t\t\tif (matches[url_id][selector_id].length === 0) {\n\t\t\t\tcurrent_row.push('');\n\n\t\t\t} else if (matches[url_id][selector_id].length === 1) {\n\t\t\t\tif (matches[url_id][selector_id][0].text !== null) {\n\t\t\t\t\tcurrent_row.push(matches[url_id][selector_id][0].text.replace(/(\\r\\n|\\n|\\r)/gm, \" \"));\n\t\t\t\t}else{\n\t\t\t\t\tcurrent_row.push('');\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tcurrent_row.push(JSON.stringify(matches[url_id][selector_id]).replace(/(\\r\\n|\\n|\\r)/gm, \" \"));\n\t\t\t}\n\n\t\t}\n\n\t\tcsv_export_array.push(current_row)\n\t}\n\n\treturn csv_export_array\n}\n\n\nconst PosedCell = posed.div({\n\tpressable: true,\n\tinit: { scale: 1 },\n\tpress: { scale: 0.98 }\n});\n\n\nclass PartialResults extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tlet matches = get_content(this.props.crawl_urls, this.props.crawl_selectors)\n\n\t\tthis.state = {\n\t\t\tmatches: matches,\n\t\t\tredirect: false,\n\t\t\topen_dialog: false,\n\t\t\tdialog_json: [],\n\t\t\tdialog_url: '',\n\t\t}\n\n\t\tthis.use_result_as_urls = this.use_result_as_urls.bind(this);\n\t}\n\n\tuse_result_as_urls(){\n\t\t// Get base URL (without path) to use with relative paths down the line\n\t\tconst url = document.createElement('a');\n\t\turl.setAttribute('href', this.state.dialog_url);\n\t\tlet base_url = url.protocol + '//' + url.hostname;\n\t\tif (url.port.length > 0) {\n\t\t\tbase_url = base_url + ':' + url.port\n\t\t}\n\n\t\t// Create a regex pattern to test for absolute URLs\n\t\tvar regex_pattern = new RegExp('^(?:[a-z]+:)?//', 'i');\n\n\t\tvar urls_to_crawl = {};\n\t\tfor (var i = this.state.dialog_json.length - 1; i >= 0; i--) {\n\t\t\tlet scraped_url = this.state.dialog_json[i].text.trim();\n\t\t\tlet is_absolute_url = regex_pattern.test(scraped_url)\n\n\t\t\tif (is_absolute_url) {\n\t\t\t\tlet new_url_id = uniqid();\n\t\t\t\turls_to_crawl[new_url_id] = {\n\t\t\t\t\turl: scraped_url,\n\t\t\t\t\turl_id: new_url_id,\n\t\t\t\t\t'status': 'in_queue',\n\t\t\t\t\tpage_source: false,\n\t\t\t\t\tresponse_code: false\n\t\t\t\t}\n\n\t\t\t}else{\n\t\t\t\tlet new_url_id = uniqid();\n\t\t\t\turls_to_crawl[new_url_id] = {\n\t\t\t\t\turl: base_url + scraped_url,\n\t\t\t\t\turl_id: new_url_id,\n\t\t\t\t\t'status': 'in_queue',\n\t\t\t\t\tpage_source: false,\n\t\t\t\t\tresponse_code: false\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.setState({open_dialog: false});\n\t\tthis.props.actions.set_full_list_urls(urls_to_crawl);\n\t\tthis.setState({redirect: '/'});\n\t}\n\n\trender() {\n\t\tif (this.state.redirect) {\n\t\t\treturn <Redirect to={this.state.redirect} />\n\t\t}\n\t\n\t\treturn (\n\t\t\t<div className=\"partial-main-container\">\n\t\t\t\t<Paper className=\"partial-section\">\n\t\t\t\t\t<div className=\"partial-section-header\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div className=\"partial-section-header-title\">\n\t\t\t\t\t\t\t\tPartial Results\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"partial-section-header-subtitle\">\n\t\t\t\t\t\t\t\tData parsed using the scraper results before post processing\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Button className=\"post-process-previous-button\" variant=\"contained\" color=\"secondary\" onClick={() => this.setState({redirect: '/urls/'})}>BACK</Button>\n\t\t\t\t\t\t\t<CSVLink separator={\"|\"} enclosingCharacter={`\"`} filename={\"pipe-separated-partial-data.csv\"} data={generate_csv_from_matches(this.props.crawl_urls, this.props.crawl_selectors, this.props.partial_results)}>\n\t\t\t\t\t\t\t\t<Button className=\"partial-download-button\" variant=\"contained\" color=\"secondary\">DOWNLOAD</Button>\n\t\t\t\t\t\t\t</CSVLink>\n\t\t\t\t\t\t\t<Button className=\"partial-postprocess-button\" variant=\"contained\" color=\"primary\" onClick={() => {this.setState({redirect: \"/post-process/\"})}}>Post Process</Button>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"partial-section-body\">\n\t\t\t\t\t\t<div className=\"table-container\">\n\t\t\t\t\t\t\t<Table collapsing celled>\n\t\t\t\t\t\t\t\t<Table.Header>\n\t\t\t\t\t\t\t\t\t<Table.Row>\n\t\t\t\t\t\t\t\t\t\t<Table.HeaderCell>URL</Table.HeaderCell>\n\t\t\t\t\t\t\t\t\t\t{Object.keys(this.props.crawl_selectors).map((selector_id) => {\n\t\t\t\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t\t\t\t<Table.HeaderCell>{this.props.crawl_selectors[selector_id].tag.title ? this.props.crawl_selectors[selector_id].tag.title : 'Post Process' }</Table.HeaderCell>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t<Table.HeaderCell>Status</Table.HeaderCell>\n\t\t\t\t\t\t\t\t\t\t<Table.HeaderCell>Response Code</Table.HeaderCell>\n\t\t\t\t\t\t\t\t\t</Table.Row>\n\t\t\t\t\t\t\t\t</Table.Header>\n\t\t\t\t\t\t\t\t<Table.Body>\n\t\t\t\t\t\t\t\t\t{Object.keys(this.props.crawl_urls).map((url_id) => {\n\t\t\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t\t\t<Table.Row key={uniqid()}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Table.Cell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<PosedCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CopyToClipboard text={this.props.crawl_urls[url_id].url}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EllipsisText text={this.props.crawl_urls[url_id].url} length={\"70\"} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</CopyToClipboard>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</PosedCell>\n\t\t\t\t\t\t\t\t\t\t\t\t</Table.Cell>\n\t\t\t\t\t\t\t\t\t\t\t\t{Object.keys(this.props.crawl_selectors).map((selector_id) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Table.Cell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<PosedCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.props.partial_results[url_id][selector_id].length === 1 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CopyToClipboard text={ this.props.partial_results[url_id][selector_id][0].text }>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EllipsisText\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttext={ this.props.partial_results[url_id][selector_id][0].text === null ? '' : this.props.partial_results[url_id][selector_id][0].text }\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlength={\"70\"}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</CopyToClipboard>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{this.props.partial_results[url_id][selector_id].length > 1 &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<span className=\"partial-multiple-found\" onClick={() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({dialog_json: this.props.partial_results[url_id][selector_id]});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.state.dialog_url = this.props.crawl_urls[url_id].url;\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.setState({open_dialog: true});\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tMultiple Found\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</PosedCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Table.Cell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t<Table.Cell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<PosedCell>\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CopyToClipboard text={this.props.crawl_urls[url_id].status}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EllipsisText text={this.props.crawl_urls[url_id].status} length={\"70\"} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</CopyToClipboard>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</PosedCell>\t\n\t\t\t\t\t\t\t\t\t\t\t\t</Table.Cell>\n\t\t\t\t\t\t\t\t\t\t\t\t<Table.Cell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<PosedCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CopyToClipboard text={this.props.crawl_urls[url_id].response_code.toString()}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EllipsisText text={this.props.crawl_urls[url_id].response_code.toString()} length={\"70\"} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</CopyToClipboard>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</PosedCell>\n\t\t\t\t\t\t\t\t\t\t\t\t</Table.Cell>\n\t\t\t\t\t\t\t\t\t\t\t</Table.Row>\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</Table.Body>\n\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Paper>\n\n\n\t\t\t\t<Dialog\n\t\t\t\t\topen={this.state.open_dialog}\n\t\t\t\t\tonClose={() => this.setState({open_dialog: false})}\n\t\t\t\t\taria-labelledby=\"alert-dialog-title\"\n\t\t\t\t\taria-describedby=\"alert-dialog-description\"\n\t\t\t\t>\n\t\t\t\t\t<DialogTitle id=\"alert-dialog-title\">Your selector returned multiple elements</DialogTitle>\n\t\t\t\t\t<DialogContent>\n\t\t\t\t\t\t<DialogContentText id=\"alert-dialog-description\">\n\t\t\t\t\t\t\t<ReactJson collapsed={true} src={this.state.dialog_json} />\n\t\t\t\t\t\t</DialogContentText>\n\t\t\t\t\t</DialogContent>\n\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t<Button variant=\"contained\" color=\"secondary\" onClick={() => this.setState({open_dialog: false})}>CLOSE</Button>\n\t\t\t\t\t\t<Button variant=\"contained\" color=\"primary\" onClick={this.use_result_as_urls}>USE AS URLS</Button>\n\t\t\t\t\t</DialogActions>\n\t\t\t\t</Dialog>\n\t\t\t</div>\n\n\t\t);\n\t}\n}\n\n// Map Redux state to component props\nfunction mapStateToProps(state) {\n\treturn {\n\t\tcrawl_urls: state.GlobalReducer.crawl_urls,\n\t\tcrawl_selectors: state.GlobalReducer.crawl_selectors,\n\t\tpartial_results: state.GlobalReducer.partial_results,\n\t}\n}\n\n// Map Redux actions to component props\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tactions: bindActionCreators({...global_action_creators}, dispatch)\n\t}\n}\n\n// Connect component to the store\nexport default connect(mapStateToProps, mapDispatchToProps)(PartialResults)","import React from 'react';\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport Divider from '@material-ui/core/Divider';\nimport Input from '@material-ui/core/Input';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport { Redirect } from 'react-router-dom';\nimport Popover from 'react-text-selection-popover';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport ScrollArea from 'react-scrollbar';\nimport uniqid from 'uniqid';\nimport ReactShortcut from 'react-shortcut';\n\n// Actions\nimport * as global_action_creators from '../actions/GlobalActions.js';\n\n// CSS Imports\nimport './styles/PostProcess.css';\n\n// Constants import\nimport * as constants from '../constants.js'\n\n\nclass NewMatch extends React.Component {\n\t// constructor(props) {\n\t// \tsuper(props);\n\t// }\n\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<div className=\"post-process-selector-container\">\n\t\t\t\t\t<div className=\"post-process-selector-input-container\">\n\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\tlabel=\"Dense multiline\"\n\t\t\t\t\t\t\tfullWidth\n\t\t\t\t\t\t\tdisableUnderline={true}\n\t\t\t\t\t\t\tplaceholder=\"\"\n\t\t\t\t\t\t\tdefaultValue={this.props.match.text}\n\t\t\t\t\t\t\tonChange={(event) => {\n\t\t\t\t\t\t\t\t// this.props.edit_selector(this.props.config.selector_id, event.target.value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span style={{backgroundColor: this.props.match.tag.color}} className=\"post-process-tag-indicator\">{this.props.match.tag.title}</span>\n\t\t\t\t\t<CopyToClipboard text={this.props.match.text}>\n\t\t\t\t\t\t<i className=\"post-process-selector-icon material-icons\">flip_to_front</i>\n\t\t\t\t\t</CopyToClipboard>\n\t\t\t\t\t<i className=\"post-process-selector-icon material-icons\" onClick={() => this.props.parent.remove_match(this.props.match.tag.tag_id)}>close</i>\n\t\t\t\t</div>\n\t\t\t\t<Divider />\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\n\n\nvar popover_timer = window.setTimeout(() => {}, 1);\n\nclass PostProcessPopovoer extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\tis_open: false,\n\t\t\tclose_timeout: false,\n\t\t\tcurrent_selection: ''\n\t\t}\n\n\t\tthis.popover_close = this.popover_close.bind(this);\n\t\tthis.popover_open = this.popover_open.bind(this);\n\t}\n\n\tpopover_open(){\n\t\tlet selection = window.getSelection().toString()\n\t\t// eslint-disable-next-line\n\t\tthis.props.parent.state.current_selection = selection;\n\n\t\twindow.clearTimeout(popover_timer);\n\t\tthis.setState({ is_open: true })\n\t}\n\n\tpopover_close(){\n\t\twindow.clearTimeout(popover_timer);\n\t\tpopover_timer = window.setTimeout(() => {\n\t\t\tthis.setState({ is_open: false });\n\t\t\t// eslint-disable-next-line\n\t\t\tthis.props.parent.state.current_selection = '';\n\t\t}, 400);\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t{this.props.children}\n\t\t\t\t<Popover\n\t\t\t\t\tselectionRef={this.props.ref_element}\n\t\t\t\t\tisOpen={this.state.is_open}\n\t\t\t\t\tonTextSelect={this.popover_open}\n\t\t\t\t\tonTextUnselect={this.popover_close}\n\t\t\t\t>\n\t\t\t\t\t{/*\n\t\t\t\t\t<div className=\"post-process-popover-content\">\n\t\t\t\t\t\t{constants.tag_options.map((tag) => \n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclassName=\"post-process-popover-tag\"\n\t\t\t\t\t\t\t\tonClick={() => { this.props.parent.add_match(tag) }} \n\t\t\t\t\t\t\t\tkey={uniqid()}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div className=\"post-process-popover-tag-color\" style={{backgroundColor: tag.color}} key={uniqid()}></div>\n\t\t\t\t\t\t\t\t<div className=\"post-process-popover-tag-title\" key={uniqid()}>{tag.title}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t*/}\n\t\t\t\t</Popover>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\n\nfunction prepare_post_process_array(urls, selectors, matches){\n\tvar to_post_process_array = [];\n\n\t// Now let's create an array with all the elements that should be post processed\n\tfor (var i = 0; i < Object.keys(urls).length; i++) {\n\t\tlet url_id = Object.keys(urls)[i];\n\t\tlet url = urls[url_id];\n\n\t\t// Check if the crawl was a success, ignore otherwise\n\t\tif (url.status === 'success') {\n\n\t\t\t// eslint-disable-next-line\n\t\t\tfor (var j = 0; j < Object.keys(selectors).length; j++) {\n\n\t\t\t\tlet selector_id = Object.keys(selectors)[j];\n\t\t\t\tlet selector = selectors[selector_id];\n\n\t\t\t\t// Check if the tag for the selector is false, that's the signal that the selctor has no defined tag and should rather be post-processed\n\t\t\t\t// Also check if the post process tag was found in the page source code\n\n\t\t\t\tif (selector.tag === false) {\n\t\t\t\t\tfor (var k = matches[url_id][selector_id].length - 1; k >= 0; k--) {\n\t\t\t\t\t\t// If it was, then append the match to be post processed\n\t\t\t\t\t\tto_post_process_array.push({\n\t\t\t\t\t\t\tmatch: matches[url_id][selector_id][k],\n\t\t\t\t\t\t\tselector: selector,\n\t\t\t\t\t\t\turl: url,\n\t\t\t\t\t\t\tpost_processed: {}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t}\n\n\treturn to_post_process_array;\n}\n\nfunction prepare_final_resuts(urls, selectors, matches, post_processed){\n\t// Now let's create an array with all possible tag IDs to use as the columns for our export\n\tvar all_tags = [];\n\t\n\t// Now push to the all_tags array all the non-post-process tags\n\tfor (var i = 0; i < Object.keys(selectors).length; i++) {\n\t\tlet selector_id = Object.keys(selectors)[i];\n\t\tlet selector = selectors[selector_id];\n\t\tif (selector.tag) {\n\t\t\tall_tags.push(selector.tag.tag_id)\n\t\t}\n\t}\n\n\t// Now push to the all_tags array all tags created during post-process\n\t// eslint-disable-next-line\n\tfor (var i = post_processed.length - 1; i >= 0; i--) {\n\t\tfor (var j = 0; j < Object.keys(post_processed[i].post_processed).length; j++) {\n\t\t\tlet match_id = Object.keys(post_processed[i].post_processed)[j];\n\t\t\tlet match = post_processed[i].post_processed[match_id];\n\t\t\tall_tags.push(match.tag.tag_id)\n\t\t}\n\t}\n\n\t// This is the object that will contain all the results extracted so far\n\t// It will be a two-dimensional array with url ids in the first dimension and tag ids in the second\n\tvar results = {};\n\n\t// Now let's fill the results array with false for all possible tags, we will later fill this object with the actual results\n\t// eslint-disable-next-line\n\tfor (var i = 0; i < Object.keys(urls).length; i++) {\n\t\tlet url_id = Object.keys(urls)[i];\n\t\tlet url = urls[url_id];\n\t\t\n\t\t// Check if the crawl was a success, ignore otherwise\n\t\tif (url.status === 'success') {\n\t\t\t\n\t\t\t// create the url key\n\t\t\tresults[url.url_id] = {}\n\n\t\t\t// Now fill the url key with all possible tags, but with empty value for each\n\t\t\t// eslint-disable-next-line\n\t\t\tfor (var j = all_tags.length - 1; j >= 0; j--) {\n\t\t\t\tlet current_tag = all_tags[j];\n\t\t\t\tresults[url.url_id][current_tag] = []\n\t\t\t}\n\t\t}\n\t}\n\n\t// Now let's fill the result array with the non post-process results\n\t// eslint-disable-next-line\n\tfor (var i = 0; i < Object.keys(matches).length; i++) {\n\t\tlet url_id = Object.keys(matches)[i];\n\t\tlet selector_ids = matches[url_id];\n\n\t\t// eslint-disable-next-line\n\t\tfor (var j = 0; j < Object.keys(selector_ids).length; j++) {\n\t\t\tlet selector_id = Object.keys(selector_ids)[j];\n\t\t\tlet selector = selectors[selector_id];\n\t\t\tlet result = selector_ids[selector_id];\n\t\t\tlet tag = selector.tag;\n\n\t\t\t// If tag equals false, that means this selector should be post-processed and thus the resuls were already included in the previous loop\n\t\t\t// So we only have to add the resuls where the tag actually has a tag dict assigned to it\n\t\t\tif (tag) {\n\t\t\t\tresults[url_id][tag.tag_id] = result\n\t\t\t}\n\t\t}\n\t}\n\n\t// Now let's fill the result array with the post-process results\n\t// eslint-disable-next-line\n\tfor (var i = post_processed.length - 1; i >= 0; i--) {\n\t\tlet url_id = post_processed[i].url.url_id;\n\t\tlet post_processed_tags = post_processed[i].post_processed;\n\n\t\t// eslint-disable-next-line\n\t\tfor (var j = 0; j < Object.keys(post_processed_tags).length; j++) {\n\t\t\tlet post_procced_tag_id = Object.keys(post_processed_tags)[j];\n\t\t\tlet post_procced_tag = post_processed_tags[post_procced_tag_id]\n\n\t\t\tresults[url_id][post_procced_tag.tag.tag_id] = [{text: post_procced_tag.text, html: post_procced_tag.text}]\n\n\t\t\t// results[url_id][post_procced_tag.tag.tag_id] = post_procced_tag.text;\n\t\t}\n\t}\n\n\treturn(results)\n}\n\n\nclass PostProcess extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.ref_text = React.createRef()\n\t\tthis.ref_html = React.createRef()\n\t\t\n\t\t// eslint-disable-next-line\n\t\tvar to_post_process_array = prepare_post_process_array(this.props.crawl_urls, this.props.crawl_selectors, this.props.partial_results);\n\n\t\tthis.state = {\n\t\t\tcurrent_match_index: 0,\n\t\t\tto_post_process_array: to_post_process_array,\n\t\t\tcurrent_selection: '',\n\t\t\tredirect: false,\n\t\t\tcurrent_tag_type: '',\n\t\t\trender_divider: false\n\t\t}\n\n\t\tthis.add_match = this.add_match.bind(this);\n\t\tthis.remove_match = this.remove_match.bind(this);\n\t\tthis.clear_matches = this.clear_matches.bind(this);\n\t\tthis.finish_post_process = this.finish_post_process.bind(this);\n\t\tthis.next = this.next.bind(this);\n\t\tthis.previous = this.previous.bind(this);\n\n\t\tif (this.state.to_post_process_array.length === 0 ) {\n\t\t\tlet results = prepare_final_resuts(this.props.crawl_urls, this.props.crawl_selectors, this.props.partial_results, this.state.to_post_process_array);\n\t\t\tthis.props.actions.set_final_results(results);\n\t\t\tthis.state.redirect = '/final-results/';\n\t\t}\n\t}\n\n\tadd_match(tag){\n\t\t// Create a copy of the current to_post_process_array\n\t\tvar new_to_post_process_array = this.state.to_post_process_array.slice();\n\n\t\tnew_to_post_process_array[this.state.current_match_index].post_processed[tag.tag_id] = {text: this.state.current_selection, html: this.state.current_selection, tag: tag}\n\t\tthis.setState({to_post_process_array: new_to_post_process_array});\n\t}\n\n\tremove_match(tag_id){\n\t\tvar new_to_post_process_array = this.state.to_post_process_array.slice();\n\n\t\tdelete new_to_post_process_array[this.state.current_match_index].post_processed[tag_id]\n\t\tthis.setState({to_post_process_array: new_to_post_process_array});\n\t}\n\n\tclear_matches(){\n\t\tvar new_to_post_process_array = this.state.to_post_process_array.slice();\n\t\tfor (var i = Object.keys(new_to_post_process_array[this.state.current_match_index].post_processed).length - 1; i >= 0; i--) {\n\t\t\tlet tag_id = Object.keys(new_to_post_process_array[this.state.current_match_index].post_processed)[i];\n\t\t\tdelete new_to_post_process_array[this.state.current_match_index].post_processed[tag_id]\n\t\t}\n\n\t\tthis.setState({to_post_process_array: new_to_post_process_array});\n\t}\n\n\tfinish_post_process(){\n\t\tlet results = prepare_final_resuts(this.props.crawl_urls, this.props.crawl_selectors, this.props.partial_results, this.state.to_post_process_array)\n\t\tthis.props.actions.set_final_results(results)\n\t\tthis.setState({redirect: '/final-results/'})\n\t}\n\n\tnext(){\n\t\tif (this.state.current_match_index < this.state.to_post_process_array.length - 1) {\n\t\t\tthis.setState({current_match_index: this.state.current_match_index + 1});\n\t\t}\n\t}\n\n\tprevious(){\n\t\tif (this.state.current_match_index > 0) {\n\t\t\tthis.setState({current_match_index: this.state.current_match_index - 1});\n\t\t}\n\t}\n\n\trender() {\n\t\tif (this.state.redirect) {\n\t\t\treturn <Redirect to={this.state.redirect} />\n\t\t}\n\n\t\treturn (\n\t\t\t<React.Fragment>\n\t\t\t\t<ReactShortcut keys=\"Right\" onKeysPressed={this.next} />\n\t\t\t\t<ReactShortcut keys=\"Left\" onKeysPressed={this.previous} />\n\t\t\t\t<div className=\"post-process-main-container\">\n\t\t\t\t\t<div className=\"post-process-main-container-inner\">\n\t\t\t\t\t\t<LinearProgress variant=\"determinate\" value={100*(this.state.current_match_index/this.state.to_post_process_array.length)} />\n\t\t\t\t\t\t<Paper className=\"post-process-section\">\n\t\t\t\t\t\t\t<div className=\"post-process-section-header\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div className=\"post-process-section-header-title\">\n\t\t\t\t\t\t\t\t\t\tPost Processing\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"post-process-section-header-subtitle\">\n\t\t\t\t\t\t\t\t\t\tPlease highlight and tag all the content accordingly\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<a href={this.state.to_post_process_array[this.state.current_match_index].url.url} rel=\"noopener noreferrer\" target=\"_blank\">\n\t\t\t\t\t\t\t\t\t\t<Button className=\"post-process-previous-button\" variant=\"contained\" color=\"secondary\">VISIT PAGE</Button>\n\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t{this.state.current_match_index === 0 &&\n\t\t\t\t\t\t\t\t\t\t<Button className=\"post-process-previous-button\" variant=\"contained\" color=\"primary\" onClick={() => this.setState({redirect: '/partial-results/'})}>BACK</Button>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t{this.state.current_match_index > 0 &&\n\t\t\t\t\t\t\t\t\t\t<Button className=\"post-process-previous-button\" variant=\"contained\" color=\"primary\" onClick={this.previous}>PREVIOUS</Button>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t{this.state.current_match_index < this.state.to_post_process_array.length - 1 &&\n\t\t\t\t\t\t\t\t\t\t<Button className=\"post-process-next-button\" variant=\"contained\" color=\"primary\" onClick={this.next}>NEXT</Button>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t{this.state.current_match_index === this.state.to_post_process_array.length - 1 &&\n\t\t\t\t\t\t\t\t\t\t<Button className=\"post-process-next-button\" variant=\"contained\" color=\"primary\" onClick={this.finish_post_process}>FINISH</Button>\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"post-process-section-body\">\n\t\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t\t<div className=\"post-process-section-body-inner\">\n\t\t\t\t\t\t\t\t\t<ScrollArea className=\"post-process-section-body-left\" verticalContainerStyle={{width: 4}}>\n\t\t\t\t\t\t\t\t\t\t{constants.tag_options.map((tag) => {\n\t\t\t\t\t\t\t\t\t\t\tif (tag.type !== this.state.current_tag_type) {\n\t\t\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\t\t\t\t\t\t\t\tthis.state.current_tag_type = tag.type;\n\t\t\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\t\t\t\t\t\t\t\tthis.state.render_divider = true;\n\t\t\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\t\t\t// eslint-disable-next-line\n\t\t\t\t\t\t\t\t\t\t\t\tthis.state.render_divider = false;\n\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{this.state.render_divider &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<React.Fragment>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"post-process-popover-divider-title\">{this.state.current_tag_type}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"post-process-popover-tag\"\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={uniqid()}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tonClick={() => { this.add_match(tag) }} \n\t\t\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"post-process-popover-tag-color\" style={{backgroundColor: tag.color}} key={uniqid()}></div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div className=\"post-process-popover-tag-title\" key={uniqid()}>{tag.title}</div>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t\t\t</React.Fragment>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</ScrollArea>\n\t\t\t\t\t\t\t\t\t<div className=\"post-process-section-body-right\">\n\t\t\t\t\t\t\t\t\t\t<PostProcessPopovoer parent={this} ref_element={this.ref_text}>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"post-process-raw-text\" contentEditable=\"true\" ref={this.ref_text}>\n\t\t\t\t\t\t\t\t\t\t\t\t{this.state.to_post_process_array[this.state.current_match_index].match.text}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</PostProcessPopovoer>\n\t\t\t\t\t\t\t\t\t\t<PostProcessPopovoer parent={this} ref_element={this.ref_html}>\n\t\t\t\t\t\t\t\t\t\t\t<div className=\"post-process-raw-html\" contentEditable=\"true\" ref={this.ref_html}>\n\t\t\t\t\t\t\t\t\t\t\t\t{this.state.to_post_process_array[this.state.current_match_index].match.html}\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</PostProcessPopovoer>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Paper>\n\n\t\t\t\t\t\t<Paper className=\"post-process-section\">\n\t\t\t\t\t\t\t<div className=\"post-process-section-header\">\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<div className=\"post-process-section-header-title\">\n\t\t\t\t\t\t\t\t\t\tCurrent Tags\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div className=\"post-process-section-header-subtitle\">\n\t\t\t\t\t\t\t\t\t\tThese are the tags selected so far\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div>\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t<Button className=\"post-process-next-button\" variant=\"contained\" color=\"primary\" onClick={this.clear_matches}>CLEAR</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<br />\n\t\t\t\t\t\t\t{Object.keys(this.state.to_post_process_array[this.state.current_match_index].post_processed).length > 0 &&\n\t\t\t\t\t\t\t\t<Divider />\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t<ScrollArea className=\"post-process-section-body post-process-matcehs-section\">\n\t\t\t\t\t\t\t\t{Object.keys(this.state.to_post_process_array[this.state.current_match_index].post_processed).map((tag_id) => {\n\t\t\t\t\t\t\t\t\tlet match = this.state.to_post_process_array[this.state.current_match_index].post_processed[tag_id];\n\t\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t\t<NewMatch parent={this} match={match} key={uniqid()}/>\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</ScrollArea>\n\t\t\t\t\t\t</Paper>\n\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</React.Fragment>\n\t\t);\n\t}\n}\n\n// Map Redux state to component props\nfunction mapStateToProps(state) {\n\treturn {\n\t\tcrawl_urls: state.GlobalReducer.crawl_urls,\n\t\tcrawl_selectors: state.GlobalReducer.crawl_selectors,\n\t\tpartial_results: state.GlobalReducer.partial_results,\n\t}\n}\n\n// Map Redux actions to component props\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tactions: bindActionCreators({...global_action_creators}, dispatch)\n\t}\n}\n\n// Connect component to the store\nexport default connect(mapStateToProps, mapDispatchToProps)(PostProcess)","import React from 'react';\nimport { connect } from 'react-redux'\nimport { bindActionCreators } from 'redux'\nimport { Redirect } from 'react-router-dom';\nimport { Table } from 'semantic-ui-react'\nimport uniqid from 'uniqid';\nimport EllipsisText from 'react-ellipsis-text';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport Button from '@material-ui/core/Button';\nimport Paper from '@material-ui/core/Paper';\nimport { CSVLink } from \"react-csv\";\nimport posed from 'react-pose';\n\n// Constants import\nimport * as constants from '../constants.js'\n\n// Actions\nimport * as global_action_creators from '../actions/GlobalActions.js';\n\n// CSS Imports\nimport './styles/FinalResults.css';\n\nfunction randomProperty(obj) {\n\tvar keys = Object.keys(obj);\n\treturn keys[0];\n};\n\nconst PosedCell = posed.div({\n\tpressable: true,\n\tinit: { scale: 1 },\n\tpress: { scale: 0.98 }\n});\n\n// Simple helper function to create a dictionary with the tag_id's as the keys and the actual tags as the values\nfunction create_tag_dict(tag_array){\n\tvar tag_dict = {}\n\tfor (var i = tag_array.length - 1; i >= 0; i--) {\n\t\tlet current_tag = tag_array[i]\n\t\ttag_dict[current_tag.tag_id] = current_tag;\n\t}\n\n\treturn tag_dict\n}\n\nfunction generate_csv_from_matches(final_results, tags, urls){\n\tlet csv_export_array = [];\n\tlet tag_titles = [];\n\n\t// Now let's create an array with all the tag's names to work as the header of our CSV\n\t// To do so we can get a random key (that represents a random URL) of our final_resuts dict and get all the tags for that url\n\tlet random_url_id = randomProperty(final_results)\n\tfor (var i = Object.keys(final_results[random_url_id]).length - 1; i >= 0; i--) {\n\t\tlet current_tag = Object.keys(final_results[random_url_id])[i];\n\t\ttag_titles.push(tags[current_tag].title)\n\t}\n\n\t// The Header of our CSV then is the tag_titles variable plus the default headers we would like to add: URL, Status and Response Code\n\tlet header = ['URL', 'Status', 'Response Code', ...tag_titles];\n\n\tcsv_export_array.push(header)\n\n\t// Now we simply have to push the results for each one of the URLs to a separate array (current_row) and then push that array to the final array that will become our CSV (csv_export_array)\n\t// eslint-disable-next-line\n\tfor (var i = Object.keys(final_results).length - 1; i >= 0; i--) {\n\t\tlet current_row = []\n\t\tlet current_url = Object.keys(final_results)[i];\n\n\t\tcurrent_row.push(urls[current_url].url)\n\t\tcurrent_row.push(urls[current_url].status)\n\t\tcurrent_row.push(urls[current_url].response_code)\n\n\t\tfor (var j = Object.keys(final_results[current_url]).length - 1; j >= 0; j--) {\n\t\t\tlet current_tag = Object.keys(final_results[current_url])[j]\n\n\t\t\tif (final_results[current_url][current_tag].length > 0) {\n\t\t\t\tcurrent_row.push(final_results[current_url][current_tag][0].text.replace(/(\\r\\n|\\n|\\r)/gm, \" \"))\n\t\t\t}else{\n\t\t\t\tcurrent_row.push('')\n\t\t\t}\n\t\t}\n\n\t\tcsv_export_array.push(current_row)\n\t}\n\n\treturn csv_export_array\n}\n\nclass FinalResults extends React.Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tvar tag_dict = create_tag_dict(constants.tag_options)\n\n\t\tthis.state = {\n\t\t\ttags: tag_dict,\n\t\t\tcsv_data: generate_csv_from_matches(this.props.final_results, tag_dict, this.props.crawl_urls),\n\t\t\tredirect: false\n\t\t}\n\t}\n\n\trender() {\n\t\tif (this.state.redirect) {\n\t\t\treturn <Redirect to={this.state.redirect} />\n\t\t}\n\n\t\treturn (\n\t\t\t<div className=\"final-main-container\">\n\t\t\t\t<Paper className=\"final-section\">\n\t\t\t\t\t<div className=\"final-section-header\">\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div className=\"final-section-header-title\">\n\t\t\t\t\t\t\t\tFinal Results\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"final-section-header-subtitle\">\n\t\t\t\t\t\t\t\tData parsed using the scraper results after post processing\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Button className=\"final-home-button\" variant=\"contained\" color=\"secondary\" onClick={() => {this.setState({redirect: \"/\"})}}>Home</Button>\n\t\t\t\t\t\t\t<CSVLink separator={\"|\"} enclosingCharacter={`\"`} filename={\"pipe-separated-final-data.csv\"} data={this.state.csv_data}>\n\t\t\t\t\t\t\t\t<Button className=\"final-download-button\" variant=\"contained\" color=\"primary\">DOWNLOAD</Button>\n\t\t\t\t\t\t\t</CSVLink>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"final-section-body\">\n\t\t\t\t\t\t<div className=\"table-container\">\n\t\t\t\t\t\t\t<Table collapsing celled>\n\t\t\t\t\t\t\t\t<Table.Header>\n\t\t\t\t\t\t\t\t\t<Table.Row>\n\t\t\t\t\t\t\t\t\t\t<Table.HeaderCell>URL</Table.HeaderCell>\n\t\t\t\t\t\t\t\t\t\t{Object.keys(this.props.final_results[Object.keys(this.props.final_results)[0]]).map((tag_id) => {\n\t\t\t\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t\t\t\t<Table.HeaderCell key={uniqid()}>{this.state.tags[tag_id].title}</Table.HeaderCell>\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t<Table.HeaderCell>Status</Table.HeaderCell>\n\t\t\t\t\t\t\t\t\t\t<Table.HeaderCell>Response Code</Table.HeaderCell>\n\t\t\t\t\t\t\t\t\t</Table.Row>\n\t\t\t\t\t\t\t\t</Table.Header>\n\t\t\t\t\t\t\t\t<Table.Body>\n\t\t\t\t\t\t\t\t\t{Object.keys(this.props.final_results).map((url_id) => {\n\t\t\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t\t\t<Table.Row key={uniqid()}>\n\t\t\t\t\t\t\t\t\t\t\t\t<Table.Cell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<PosedCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CopyToClipboard text={this.props.crawl_urls[url_id].url}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EllipsisText text={this.props.crawl_urls[url_id].url} length={\"70\"} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</CopyToClipboard>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</PosedCell>\n\t\t\t\t\t\t\t\t\t\t\t\t</Table.Cell>\n\t\t\t\t\t\t\t\t\t\t\t\t{Object.keys(this.props.final_results[url_id]).map((tag_id) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Table.Cell key={uniqid()}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<PosedCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CopyToClipboard text={this.props.final_results[url_id][tag_id].length > 0 ? this.props.final_results[url_id][tag_id][0].text : ''}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EllipsisText text={this.props.final_results[url_id][tag_id].length > 0 ? this.props.final_results[url_id][tag_id][0].text : ''} length={\"70\"} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</CopyToClipboard>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</PosedCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Table.Cell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\t\t\t\t<Table.Cell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<PosedCell>\t\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CopyToClipboard text={this.props.crawl_urls[url_id].status}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EllipsisText text={this.props.crawl_urls[url_id].status} length={\"70\"} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</CopyToClipboard>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</PosedCell>\t\n\t\t\t\t\t\t\t\t\t\t\t\t</Table.Cell>\n\t\t\t\t\t\t\t\t\t\t\t\t<Table.Cell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<PosedCell>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<CopyToClipboard text={this.props.crawl_urls[url_id].response_code.toString()}>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<EllipsisText text={this.props.crawl_urls[url_id].response_code.toString()} length={\"70\"} />\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</CopyToClipboard>\n\t\t\t\t\t\t\t\t\t\t\t\t\t</PosedCell>\n\t\t\t\t\t\t\t\t\t\t\t\t</Table.Cell>\n\t\t\t\t\t\t\t\t\t\t\t</Table.Row>\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</Table.Body>\n\t\t\t\t\t\t\t</Table>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</Paper>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\n\n// Map Redux state to component props\nfunction mapStateToProps(state) {\n\treturn {\n\t\tcrawl_urls: state.GlobalReducer.crawl_urls,\n\t\tcrawl_selectors: state.GlobalReducer.crawl_selectors,\n\t\tfinal_results: state.GlobalReducer.final_results,\n\t}\n}\n\n// Map Redux actions to component props\nfunction mapDispatchToProps(dispatch) {\n\treturn {\n\t\tactions: bindActionCreators({...global_action_creators}, dispatch)\n\t}\n}\n\n// Connect component to the store\nexport default connect(mapStateToProps, mapDispatchToProps)(FinalResults)","import React, { Component } from 'react';\nimport { Route, Switch } from \"react-router-dom\";\n// import { connect } from 'react-redux'\n// import { bindActionCreators } from 'redux'\nimport Home from '../views/Home.js';\nimport Urls from '../views/Urls.js';\nimport Progress from '../views/Progress.js';\nimport PartialResults from '../views/PartialResults.js';\nimport PostProcess from '../views/PostProcess.js';\nimport FinalResults from '../views/FinalResults.js';\n\nexport default class Routes extends Component {\n\trender() {\n\t\treturn (\n\t\t\t<Switch>\n\t\t\t\t<Route\n\t\t\t\t\tpath=\"/\"\n\t\t\t\t\texact\n\t\t\t\t\trender={() => {return(<Home/>)}\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<Route\n\t\t\t\t\tpath=\"/urls/\"\n\t\t\t\t\texact\n\t\t\t\t\trender={() => {return(<Urls/>)}\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<Route\n\t\t\t\t\tpath=\"/progress/\"\n\t\t\t\t\texact\n\t\t\t\t\trender={() => {return(<Progress/>)}\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<Route\n\t\t\t\t\tpath=\"/partial-results/\"\n\t\t\t\t\texact\n\t\t\t\t\trender={() => {return(<PartialResults/>)}\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<Route\n\t\t\t\t\tpath=\"/post-process/\"\n\t\t\t\t\texact\n\t\t\t\t\trender={() => {return(<PostProcess/>)}\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t\t<Route\n\t\t\t\t\tpath=\"/final-results/\"\n\t\t\t\t\texact\n\t\t\t\t\trender={() => {return(<FinalResults/>)}\n\t\t\t\t\t}\n\t\t\t\t/>\n\t\t\t</Switch>\n\t\t);\n\t}\n}","import React, { Component } from 'react';\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n\n// Components\nimport Header from './views/Header.js';\nimport Footer from './views/Footer.js';\n\n// import the store created in the store.js file\nimport { store_persistor } from './store';\n\n// Constants import\nimport * as constants from './constants.js'\n\n// URLs Imports\nimport Routes from './routes/Routes.js';\n\n// CSS Imports\nimport './App.css';\n\n// General theme definition\nconst material_ui_theme = {\n\ttypography: {\n\t\tfontFamily: [\n\t\t\t'Karla',\n\t\t].join(','),\n\t},\n\tpalette: {\n\t\tprimary: {\n\t\t\tmain: '#361FFB',\n\t\t\tlight: '#361FFB',\n\t\t\tdark: '#361FFB',\n\t\t\tcontrastText: '#FFFFFF',\n\t\t},\n\t\tsecondary: {\n\t\t\tmain: '#e5e5e5',\n\t\t\tlight: '#e5e5e5',\n\t\t\tdark: '#e5e5e5',\n\t\t\tcontrastText: '#000000',\n\t\t},\n\t\tprimary1Color: '#361FFB',\n\t\tprimary2Color: '#361FFB',\n\t\tprimary3Color: '#361FFB',\n\t\taccent1Color: '#361FFB',\n\t\taccent2Color: '#361FFB',\n\t\taccent3Color: '#361FFB',\n\t\ttextColor: '#101010',\n\t},\n\tappBar: {\n\t\theight: 50,\n\t},\n\tdatePicker: {\n\t\tcolor: '#361FFB',\n\t\ttextColor: '#101010',\n\t\tcalendarTextColor: '#101010',\n\t\tselectColor: '#361FFB',\n\t\tselectTextColor: '#101010',\n\t\tcalendarYearBackgroundColor: '#ffffff',\n\t\theaderColor: '#361FFB',\n\t},\n\traisedButton: {\n\t\ttextColor: '#000000',\n\t\tprimaryTextColor: '#000000'\n\t}\n}\nconst theme = createMuiTheme(material_ui_theme);\n\n\n\nclass App extends Component {\n\tconstructor(props){\n\t\tsuper(props);\n\n\t\tthis.state = {\n\t\t\topen_back_warning_dialog: false\n\t\t}\n\n\t\tif (constants.purge_store_persist_on_reload) {\n\t\t\tstore_persistor.pause()\n\t\t\tstore_persistor.flush().then(() => { return store_persistor.purge() })\n\t\t}\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<Router>\n\t\t\t\t<MuiThemeProvider theme={theme}>\n\t\t\t\t\t<Header />\n\t\t\t\t\t<div className=\"main-content\">\n\t\t\t\t\t\t<Routes />\n\t\t\t\t\t</div>\n\t\t\t\t\t<Footer />\n\t\t\t\t</MuiThemeProvider>\n\t\t\t</Router>\n\t\t);\n\t}\n}\n\nif (!constants.debug) {\n\twindow.addEventListener('beforeunload', function (e) {\n\t\te.preventDefault();\n\t\te.returnValue = '';\n\t});\n}\n\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nimport { Provider } from 'react-redux'\nimport { PersistGate } from 'redux-persist/integration/react'\n\n// import the store created in the store.js file\nimport { store, store_persistor } from './store';\n\nReactDOM.render(\n\t<Provider store={store}>\n\t\t<PersistGate\n\t\t\tloading={null}\n\t\t\tpersistor={store_persistor}\n\t\t>\n\t\t\t<App />\n\t\t</PersistGate>\n\t</Provider>,\n\tdocument.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();"],"sourceRoot":""}